!function(i){function t(i,t,e,n,s){this._listener=t,this._isOnce=e,this.context=n,this._signal=i,this._priority=s||0}function e(i,t){if("function"!=typeof i)throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}var n={VERSION:"0.7.4"};t.prototype={active:!0,params:null,execute:function(i){var t;return this.active&&this._listener&&(i=this.params?this.params.concat(i):i,t=this._listener.apply(this.context,i),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},getListener:function(){return this._listener},_destroy:function(){delete this._signal,delete this._listener,delete this.context},isOnce:function(){return this._isOnce},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},n.Signal=function(){this._bindings=[],this._prevParams=null},n.Signal.prototype={memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(i,e,n,s){var r=this._indexOfListener(i,n);if(r!==-1){if(i=this._bindings[r],i.isOnce()!==e)throw Error("You cannot add"+(e?"":"Once")+"() then add"+(e?"Once":"")+"() the same listener without removing the relationship first.")}else i=new t(this,i,e,n,s),this._addBinding(i);return this.memorize&&this._prevParams&&i.execute(this._prevParams),i},_addBinding:function(i){var t=this._bindings.length;do--t;while(this._bindings[t]&&i._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,i)},_indexOfListener:function(i,t){for(var e,n=this._bindings.length;n--;)if(e=this._bindings[n],e._listener===i&&e.context===t)return n;return-1},has:function(i,t){return this._indexOfListener(i,t)!==-1},add:function(i,t,n){return e(i,"add"),this._registerListener(i,!1,t,n)},addOnce:function(i,t,n){return e(i,"addOnce"),this._registerListener(i,!0,t,n)},remove:function(i,t){e(i,"remove");var n=this._indexOfListener(i,t);return n!==-1&&(this._bindings[n]._destroy(),this._bindings.splice(n,1)),i},removeAll:function(){for(var i=this._bindings.length;i--;)this._bindings[i]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(i){if(this.active){var t,e=Array.prototype.slice.call(arguments),n=this._bindings.length;if(this.memorize&&(this._prevParams=e),n){t=this._bindings.slice(),this._shouldPropagate=!0;do n--;while(t[n]&&this._shouldPropagate&&t[n].execute(e)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}},"function"==typeof define&&define.amd?define(n):"undefined"!=typeof module&&module.exports?module.exports=n:i.signals=n}(this);