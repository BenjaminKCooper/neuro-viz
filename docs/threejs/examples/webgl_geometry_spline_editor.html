<!DOCTYPE html><html lang="en"><head>
		<title>three.js webgl - geometry - catmull spline editor</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,user-scalable=no,minimum-scale=1,maximum-scale=1">
		<style>
			body {
				font-family: Monospace;
				background-color: #f0f0f0;
				margin: 0px;
				overflow: hidden;
			}
		</style>
	</head>
	<body>

		<script src="../build/three.js"></script>

		<script src="js/controls/DragControls.js"></script>
		<script src="js/controls/OrbitControls.js"></script>
		<script src="js/controls/TransformControls.js"></script>

		<script src="js/libs/stats.min.js"></script>

		<script>function init(){function e(){t(),n()}function n(){d=setTimeout(function(){transformControl.detach(transformControl.object)},2500)}function t(){d&&clearTimeout(d)}container=document.createElement("div"),document.body.appendChild(container),scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(70,window.innerWidth/window.innerHeight,1,1e4),camera.position.z=1e3,scene.add(camera),scene.add(new THREE.AmbientLight(15790320));var o=new THREE.SpotLight(16777215,1.5);o.position.set(0,1500,200),o.castShadow=!0,o.shadow=new THREE.LightShadow(new THREE.PerspectiveCamera(70,1,200,2e3)),o.shadow.bias=-222e-6,o.shadow.mapSize.width=1024,o.shadow.mapSize.height=1024,scene.add(o),spotlight=o;var i=new THREE.PlaneGeometry(2e3,2e3);i.rotateX(-Math.PI/2);var r=new THREE.ShadowMaterial;r.opacity=.2;var a=new THREE.Mesh(i,r);a.position.y=-200,a.receiveShadow=!0,scene.add(a);var s=new THREE.GridHelper(1e3,100);s.position.y=-199,s.material.opacity=.25,s.material.transparent=!0,scene.add(s);var l=new THREE.AxisHelper;l.position.set(-500,-500,-500),scene.add(l),renderer=new THREE.WebGLRenderer({antialias:!0}),renderer.setClearColor(15790320),renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth,window.innerHeight),renderer.shadowMap.enabled=!0,container.appendChild(renderer.domElement);var p=document.createElement("div");p.style.position="absolute",p.style.top="10px",p.style.width="100%",p.style.textAlign="center",p.innerHTML="catmull-rom rom spline comparisions",options=document.createElement("div"),options.style.position="absolute",options.style.top="30px",options.style.width="100%",options.style.textAlign="center",options.innerHTML='Points: <input type="button" onclick="addPoint();" value="+" />\t\t\t\t\t<input type="button" onclick="removePoint();" value="-" />\t\t\t\t\t<input type="button" onclick="exportSpline();" value="Export" /><br />\t\t\t\t\t<input type="checkbox" id="uniform" checked /> <label for="uniform">Uniform Catmull-rom</label>  <input type="range" id="tension" onchange="splines.uniform.tension = tension.value;updateSplineOutline();" min=0 max=1 step=0.01 value=0.5 /> <span id="tension_value" /></span> <br />\t\t\t\t\t<input type="checkbox" id="centripetal" checked /> Centripetal Catmull-rom<br />\t\t\t\t\t<input type="checkbox" id="chordal" checked /> Chordal Catmull-rom<br />',container.appendChild(p),container.appendChild(options),stats=new Stats,container.appendChild(stats.dom),controls=new THREE.OrbitControls(camera,renderer.domElement),controls.damping=.2,controls.addEventListener("change",render),transformControl=new THREE.TransformControls(camera,renderer.domElement),transformControl.addEventListener("change",render),scene.add(transformControl),transformControl.addEventListener("change",function(e){t()}),transformControl.addEventListener("mouseDown",function(e){t()}),transformControl.addEventListener("mouseUp",function(n){e()}),transformControl.addEventListener("objectChange",function(e){updateSplineOutline()});var c=new THREE.DragControls(splineHelperObjects,camera,renderer.domElement);c.enabled=!1,c.addEventListener("hoveron",function(e){transformControl.attach(e.object),t()}),c.addEventListener("hoveroff",function(n){e()}),controls.addEventListener("start",function(){t()}),controls.addEventListener("end",function(){e()});var d,m;for(m=0;m<splinePointsLength;m++)addSplineObject(positions[m]);for(positions=[],m=0;m<splinePointsLength;m++)positions.push(splineHelperObjects[m].position);for(var h=new THREE.Geometry,m=0;m<ARC_SEGMENTS;m++)h.vertices.push(new THREE.Vector3);var E;E=new THREE.CatmullRomCurve3(positions),E.type="catmullrom",E.mesh=new THREE.Line(h.clone(),new THREE.LineBasicMaterial({color:16711680,opacity:.35,linewidth:2})),E.mesh.castShadow=!0,splines.uniform=E,E=new THREE.CatmullRomCurve3(positions),E.type="centripetal",E.mesh=new THREE.Line(h.clone(),new THREE.LineBasicMaterial({color:65280,opacity:.35,linewidth:2})),E.mesh.castShadow=!0,splines.centripetal=E,E=new THREE.CatmullRomCurve3(positions),E.type="chordal",E.mesh=new THREE.Line(h.clone(),new THREE.LineBasicMaterial({color:255,opacity:.35,linewidth:2})),E.mesh.castShadow=!0,splines.chordal=E;for(var u in splines){var w=splines[u];scene.add(w.mesh)}load([new THREE.Vector3(289.76843686945404,452.51481137238443,56.10018915737797),new THREE.Vector3(-53.56300074753207,171.49711742836848,-14.495472686253045),new THREE.Vector3(-91.40118730204415,176.4306956436485,-6.958271935582161),new THREE.Vector3(-383.785318791128,491.1365363371675,47.869296953772746)])}function addSplineObject(e){var n=new THREE.Mesh(geometry,new THREE.MeshLambertMaterial({color:16777215*Math.random()}));return n.material.ambient=n.material.color,e?n.position.copy(e):(n.position.x=1e3*Math.random()-500,n.position.y=600*Math.random(),n.position.z=800*Math.random()-400),n.castShadow=!0,n.receiveShadow=!0,scene.add(n),splineHelperObjects.push(n),n}function addPoint(){splinePointsLength++,positions.push(addSplineObject().position),updateSplineOutline()}function removePoint(){splinePointsLength<=4||(splinePointsLength--,positions.pop(),scene.remove(splineHelperObjects.pop()),updateSplineOutline())}function updateSplineOutline(){var e;for(var n in splines){var t=splines[n];splineMesh=t.mesh;for(var o=0;o<ARC_SEGMENTS;o++)e=splineMesh.geometry.vertices[o],e.copy(t.getPoint(o/(ARC_SEGMENTS-1)));splineMesh.geometry.verticesNeedUpdate=!0}}function exportSpline(){var e,n=[];for(i=0;i<splinePointsLength;i++)e=splineHelperObjects[i].position,n.push("new THREE.Vector3({0}, {1}, {2})".format(e.x,e.y,e.z));console.log(n.join(",\n"));var t="["+n.join(",\n\t")+"]";prompt("copy and paste code",t)}function load(e){for(;e.length>positions.length;)addPoint();for(;e.length<positions.length;)removePoint();for(i=0;i<positions.length;i++)positions[i].copy(e[i]);updateSplineOutline()}function animate(){requestAnimationFrame(animate),render(),stats.update(),controls.update(),transformControl.update()}function render(){splines.uniform.mesh.visible=uniform.checked,splines.centripetal.mesh.visible=centripetal.checked,splines.chordal.mesh.visible=chordal.checked,renderer.render(scene,camera)}String.prototype.format=function(){for(var e=this,n=0;n<arguments.length;n++)e=e.replace("{"+n+"}",arguments[n]);return e};var container,stats,camera,scene,renderer,splineHelperObjects=[],splineOutline,splinePointsLength=4,positions=[],options,geometry=new THREE.BoxGeometry(20,20,20),ARC_SEGMENTS=200,splineMesh,splines={};init(),animate();</script>

	

</body></html>