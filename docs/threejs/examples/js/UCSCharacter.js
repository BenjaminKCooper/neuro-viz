THREE.UCSCharacter=function(){function t(t,e){for(var o=new THREE.TextureLoader,s=[],i=0;i<e.length;i++)s[i]=o.load(t+e[i],n.checkLoadComplete),s[i].mapping=THREE.UVMapping,s[i].name=e[i];return s}function e(t){for(var e=[],o=0;o<t.length;o++)e[o]=new THREE.MeshLambertMaterial({color:15658734,specular:10,map:t[o],skinning:!0,morphTargets:!0});return e}var o,n=this;this.scale=1,this.root=new THREE.Object3D,this.numSkins=void 0,this.numMorphs=void 0,this.skins=[],this.materials=[],this.morphs=[],this.mixer=new THREE.AnimationMixer(this.root),this.onLoadComplete=function(){},this.loadCounter=0,this.loadParts=function(s){this.numSkins=s.skins.length,this.numMorphs=s.morphs.length,this.loadCounter=1+s.skins.length,this.skins=t(s.baseUrl+"skins/",s.skins),this.materials=e(this.skins),this.morphs=s.morphs;var i=new THREE.JSONLoader;console.log(s.baseUrl+s.character),i.load(s.baseUrl+s.character,function(t){t.computeBoundingBox(),t.computeVertexNormals(),o=new THREE.SkinnedMesh(t,new THREE.MultiMaterial),o.name=s.character,n.root.add(o);var e=t.boundingBox;n.root.scale.set(s.s,s.s,s.s),n.root.position.set(s.x,s.y-e.min.y*s.s,s.z),o.castShadow=!0,o.receiveShadow=!0,n.mixer.clipAction(t.animations[0],o).play(),n.setSkin(0),n.checkLoadComplete()})},this.setSkin=function(t){o&&n.materials&&(o.material=n.materials[t])},this.updateMorphs=function(t){if(o)for(var e=0;e<n.numMorphs;e++)o.morphTargetInfluences[e]=t[n.morphs[e]]/100},this.checkLoadComplete=function(){n.loadCounter-=1,0===n.loadCounter&&n.onLoadComplete()}};