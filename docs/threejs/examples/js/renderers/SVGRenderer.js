THREE.SVGObject=function(e){THREE.Object3D.call(this),this.node=e},THREE.SVGObject.prototype=Object.create(THREE.Object3D.prototype),THREE.SVGObject.prototype.constructor=THREE.SVGObject,THREE.SVGRenderer=function(){function e(){for(W=0,I=0,D=0;T.childNodes.length>0;)T.removeChild(T.childNodes[0])}function t(e){M.setRGB(0,0,0),C.setRGB(0,0,0),A.setRGB(0,0,0);for(var t=0,i=e.length;t<i;t++){var o=e[t],n=o.color;o instanceof THREE.AmbientLight?(M.r+=n.r,M.g+=n.g,M.b+=n.b):o instanceof THREE.DirectionalLight?(C.r+=n.r,C.g+=n.g,C.b+=n.b):o instanceof THREE.PointLight&&(A.r+=n.r,A.g+=n.g,A.b+=n.b)}}function i(e,t,i,o){for(var n=0,r=e.length;n<r;n++){var s=e[n],c=s.color;if(s instanceof THREE.DirectionalLight){var a=V.setFromMatrixPosition(s.matrixWorld).normalize(),l=i.dot(a);if(l<=0)continue;l*=s.intensity,o.r+=c.r*l,o.g+=c.g*l,o.b+=c.b*l}else if(s instanceof THREE.PointLight){var a=V.setFromMatrixPosition(s.matrixWorld),l=i.dot(V.subVectors(a,t).normalize());if(l<=0)continue;if(l*=0==s.distance?1:1-Math.min(t.distanceTo(a)/s.distance,1),0==l)continue;l*=s.intensity,o.r+=c.r*l,o.g+=c.g*l,o.b+=c.b*l}}}function o(e,t,i){var o=t.scale.x*u,n=t.scale.y*h;S=a(D++),S.setAttribute("x",e.x-.5*o),S.setAttribute("y",e.y-.5*n),S.setAttribute("width",o),S.setAttribute("height",n),i instanceof THREE.SpriteMaterial&&S.setAttribute("style","fill: "+i.color.getStyle()),T.appendChild(S)}function n(e,t,i,o){S=s(I++),S.setAttribute("x1",e.positionScreen.x),S.setAttribute("y1",e.positionScreen.y),S.setAttribute("x2",t.positionScreen.x),S.setAttribute("y2",t.positionScreen.y),o instanceof THREE.LineBasicMaterial&&(S.setAttribute("style","fill: none; stroke: "+o.color.getStyle()+"; stroke-width: "+o.linewidth+"; stroke-opacity: "+o.opacity+"; stroke-linecap: "+o.linecap+"; stroke-linejoin: "+o.linejoin),T.appendChild(S))}function r(e,t,o,n,r){g.info.render.vertices+=3,g.info.render.faces++,S=c(W++),S.setAttribute("d","M "+e.positionScreen.x+" "+e.positionScreen.y+" L "+t.positionScreen.x+" "+t.positionScreen.y+" L "+o.positionScreen.x+","+o.positionScreen.y+"z"),r instanceof THREE.MeshBasicMaterial?(H.copy(r.color),r.vertexColors===THREE.FaceColors&&H.multiply(n.color)):r instanceof THREE.MeshLambertMaterial||r instanceof THREE.MeshPhongMaterial?(v.copy(r.color),r.vertexColors===THREE.FaceColors&&v.multiply(n.color),H.copy(M),L.copy(e.positionWorld).add(t.positionWorld).add(o.positionWorld).divideScalar(3),i(p,L,n.normalModel,H),H.multiply(v).add(r.emissive)):r instanceof THREE.MeshNormalMaterial&&(G.copy(n.normalModel).applyMatrix3(z),H.setRGB(G.x,G.y,G.z).multiplyScalar(.5).addScalar(.5)),r.wireframe?S.setAttribute("style","fill: none; stroke: "+H.getStyle()+"; stroke-width: "+r.wireframeLinewidth+"; stroke-opacity: "+r.opacity+"; stroke-linecap: "+r.wireframeLinecap+"; stroke-linejoin: "+r.wireframeLinejoin):S.setAttribute("style","fill: "+H.getStyle()+"; fill-opacity: "+r.opacity),T.appendChild(S)}function s(e){return null==F[e]?(F[e]=document.createElementNS("http://www.w3.org/2000/svg","line"),0==Q&&F[e].setAttribute("shape-rendering","crispEdges"),F[e]):F[e]}function c(e){return null==P[e]?(P[e]=document.createElementNS("http://www.w3.org/2000/svg","path"),0==Q&&P[e].setAttribute("shape-rendering","crispEdges"),P[e]):P[e]}function a(e){return null==N[e]?(N[e]=document.createElementNS("http://www.w3.org/2000/svg","rect"),0==Q&&N[e].setAttribute("shape-rendering","crispEdges"),N[e]):N[e]}console.log("THREE.SVGRenderer",THREE.REVISION);var l,E,p,f,d,u,h,R,b,y,S,g=this,m=new THREE.Projector,T=document.createElementNS("http://www.w3.org/2000/svg","svg"),w=new THREE.Box2,x=new THREE.Box2,H=new THREE.Color,v=new THREE.Color,M=new THREE.Color,C=new THREE.Color,A=new THREE.Color,j=new THREE.Color,k=1,V=new THREE.Vector3,L=new THREE.Vector3,G=new THREE.Vector3,z=new THREE.Matrix3,B=new THREE.Matrix4,O=new THREE.Matrix4,P=[],F=[],N=[],W=0,I=0,D=0,Q=1;this.domElement=T,this.autoClear=!0,this.sortObjects=!0,this.sortElements=!0,this.info={render:{vertices:0,faces:0}},this.setQuality=function(e){switch(e){case"high":Q=1;break;case"low":Q=0}},this.supportsVertexTextures=function(){},this.setFaceCulling=function(){},this.setClearColor=function(e,t){j.set(e),k=void 0!==t?t:1},this.setPixelRatio=function(){},this.setSize=function(e,t){f=e,d=t,u=f/2,h=d/2,T.setAttribute("viewBox",-u+" "+-h+" "+f+" "+d),T.setAttribute("width",f),T.setAttribute("height",d),w.min.set(-u,-h),w.max.set(u,h)},this.clear=function(){e(),T.style.backgroundColor="rgba("+Math.floor(255*j.r)+","+Math.floor(255*j.g)+","+Math.floor(255*j.b)+","+k+")"},this.render=function(i,s){if(s instanceof THREE.Camera==!1)return void console.error("THREE.SVGRenderer.render: camera is not an instance of THREE.Camera.");var c=i.background;c&&c.isColor?(e(),T.style.backgroundColor="rgb("+Math.floor(255*c.r)+","+Math.floor(255*c.g)+","+Math.floor(255*c.b)+")"):this.autoClear===!0&&this.clear(),g.info.render.vertices=0,g.info.render.faces=0,B.copy(s.matrixWorldInverse.getInverse(s.matrixWorld)),O.multiplyMatrices(s.projectionMatrix,B),l=m.projectScene(i,s,this.sortObjects,this.sortElements),E=l.elements,p=l.lights,z.getNormalMatrix(s.matrixWorldInverse),t(p);for(var a=0,f=E.length;a<f;a++){var d=E[a],S=d.material;if(void 0!==S&&0!==S.opacity)if(x.makeEmpty(),d instanceof THREE.RenderableSprite)R=d,R.x*=u,R.y*=-h,o(R,d,S);else if(d instanceof THREE.RenderableLine)R=d.v1,b=d.v2,R.positionScreen.x*=u,R.positionScreen.y*=-h,b.positionScreen.x*=u,b.positionScreen.y*=-h,x.setFromPoints([R.positionScreen,b.positionScreen]),w.intersectsBox(x)===!0&&n(R,b,d,S);else if(d instanceof THREE.RenderableFace){if(R=d.v1,b=d.v2,y=d.v3,R.positionScreen.z<-1||R.positionScreen.z>1)continue;if(b.positionScreen.z<-1||b.positionScreen.z>1)continue;if(y.positionScreen.z<-1||y.positionScreen.z>1)continue;R.positionScreen.x*=u,R.positionScreen.y*=-h,b.positionScreen.x*=u,b.positionScreen.y*=-h,y.positionScreen.x*=u,y.positionScreen.y*=-h,x.setFromPoints([R.positionScreen,b.positionScreen,y.positionScreen]),w.intersectsBox(x)===!0&&r(R,b,y,d,S)}}i.traverseVisible(function(e){if(e instanceof THREE.SVGObject){V.setFromMatrixPosition(e.matrixWorld),V.applyProjection(O);var t=V.x*u,i=-V.y*h,o=e.node;o.setAttribute("transform","translate("+t+","+i+")"),T.appendChild(o)}})}};