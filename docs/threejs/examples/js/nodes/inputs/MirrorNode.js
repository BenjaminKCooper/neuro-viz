THREE.MirrorNode=function(r,t,e){THREE.TempNode.call(this,"v4"),this.mirror=r instanceof THREE.Mirror?r:new THREE.Mirror(r,t,e),this.textureMatrix=new THREE.Matrix4Node(this.mirror.textureMatrix),this.worldPosition=new THREE.PositionNode(THREE.PositionNode.WORLD),this.coord=new THREE.OperatorNode(this.textureMatrix,this.worldPosition,THREE.OperatorNode.MUL),this.coordResult=new THREE.OperatorNode(null,this.coord,THREE.OperatorNode.ADD),this.texture=new THREE.TextureNode(this.mirror.renderTarget.texture,this.coord,null,!0)},THREE.MirrorNode.prototype=Object.create(THREE.TempNode.prototype),THREE.MirrorNode.prototype.constructor=THREE.MirrorNode,THREE.MirrorNode.prototype.generate=function(r,t){r.material;return r.isShader("fragment")?(this.coordResult.a=this.offset,this.texture.coord=this.offset?this.coordResult:this.coord,"sampler2D"===t?this.texture.build(r,t):r.format(this.texture.build(r,this.type),this.type,t)):(console.warn("THREE.MirrorNode is not compatible with "+r.shader+" shader."),r.format("vec4(0.0)",this.type,t))};