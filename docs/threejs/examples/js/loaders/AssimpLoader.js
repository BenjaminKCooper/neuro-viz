!function(){function e(e){return we<<e}function t(e){return xe<<e}function i(e){for(var t in e.mMeshes){var i=e.mMeshes[t];for(var r in i.mBones){var n=e.findNode(i.mBones[r].mName);n&&(n.isBone=!0)}}}function r(e,t){var i=new THREE.Bone;i.matrix.copy(e.matrix),i.matrixWorld.copy(e.matrixWorld),i.position.copy(e.position),i.quaternion.copy(e.quaternion),i.scale.copy(e.scale),t.nodeCount++,i.name="bone_"+e.name+t.nodeCount.toString(),t.nodeToBoneMap[e.name]||(t.nodeToBoneMap[e.name]=[]),t.nodeToBoneMap[e.name].push(i);for(var n in e.children){var s=r(e.children[n],t);s&&i.add(s)}return i}function n(){this.mName="",this.mDuration=0,this.mTicksPerSecond=0,this.mNumChannels=0,this.mChannels=[]}function s(e,t){for(var i=[],r=0;r<e.length;r++)i.push({i:e[r],w:t[r]});for(i.sort(function(e,t){return t.w-e.w});i.length<4;)i.push({i:0,w:0});i.length>4&&(i.length=4);for(var n=0,r=0;r<4;r++)n+=i[r].w*i[r].w;n=Math.sqrt(n);for(var r=0;r<4;r++)i[r].w=i[r].w/n,e[r]=i[r].i,t[r]=i[r].w}function a(e,t){if(0==e.name.indexOf("bone_"+t))return e;for(var i in e.children){var r=a(e.children[i],t);if(r)return r}}function m(){this.mPrimitiveTypes=0,this.mNumVertices=0,this.mNumFaces=0,this.mNumBones=0,this.mMaterialIndex=0,this.mVertices=[],this.mNormals=[],this.mTangents=[],this.mBitangents=[],this.mColors=[[]],this.mTextureCoords=[[]],this.mFaces=[],this.mBones=[],this.hookupSkeletons=function(e,t){if(0!=this.mBones.length){for(var i=[],n=[],s=e.findNode(this.mBones[0].mName);s.mParent&&s.mParent.isBone;)s=s.mParent;var m=s.toTHREE(e),o=r(m,e);this.threeNode.add(o);for(var h=0;h<this.mBones.length;h++){var u=a(o,this.mBones[h].mName);if(u){var f=u;i.push(f),n.push(this.mBones[h].mOffsetMatrix.toTHREE())}else{var s=e.findNode(this.mBones[h].mName);if(!s)return;var m=s.toTHREE(e),o=(m.parent,r(m,e));this.threeNode.add(o);var u=a(o,this.mBones[h].mName),f=u;i.push(f),n.push(this.mBones[h].mOffsetMatrix.toTHREE())}}var l=new THREE.Skeleton(i,n);this.threeNode.bind(l,new THREE.Matrix4),this.threeNode.material.skinning=!0}},this.toTHREE=function(e){if(this.threeNode)return this.threeNode;var t,i=new THREE.BufferGeometry;if(t=e.mMaterials[this.mMaterialIndex]?e.mMaterials[this.mMaterialIndex].toTHREE(e):new THREE.MeshLambertMaterial,i.setIndex(new THREE.BufferAttribute(new Uint32Array(this.mIndexArray),1)),i.addAttribute("position",new THREE.BufferAttribute(this.mVertexBuffer,3)),this.mNormalBuffer&&this.mNormalBuffer.length>0&&i.addAttribute("normal",new THREE.BufferAttribute(this.mNormalBuffer,3)),this.mColorBuffer&&this.mColorBuffer.length>0&&i.addAttribute("color",new THREE.BufferAttribute(this.mColorBuffer,4)),this.mTexCoordsBuffers[0]&&this.mTexCoordsBuffers[0].length>0&&i.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(this.mTexCoordsBuffers[0]),2)),this.mTexCoordsBuffers[1]&&this.mTexCoordsBuffers[1]&&this.mTextureCoords[1].length>0&&i.addAttribute("uv1",new THREE.BufferAttribute(new Float32Array(this.mTexCoordsBuffers[1]),2)),this.mTangentBuffer&&this.mTangentBuffer.length>0&&i.addAttribute("tangents",new THREE.BufferAttribute(this.mTangentBuffer,3)),this.mBitangentBuffer&&this.mBitangentBuffer.length>0&&i.addAttribute("bitangents",new THREE.BufferAttribute(this.mBitangentBuffer,3)),this.mBones.length>0){for(var r=[],n=[],a=0;a<this.mBones.length;a++)for(var m=0;m<this.mBones[a].mWeights.length;m++){var o=this.mBones[a].mWeights[m];o&&(r[o.mVertexId]||(r[o.mVertexId]=[]),n[o.mVertexId]||(n[o.mVertexId]=[]),r[o.mVertexId].push(o.mWeight),n[o.mVertexId].push(parseInt(a)))}for(var a in n)s(n[a],r[a]);for(var h=[],u=[],a=0;a<r.length;a++)for(var m=0;m<4;m++)r[a]&&n[a]?(h.push(r[a][m]),u.push(n[a][m])):(h.push(0),u.push(0));i.addAttribute("skinWeight",new THREE.BufferAttribute(new Float32Array(h),Pe)),i.addAttribute("skinIndex",new THREE.BufferAttribute(new Float32Array(u),Pe))}var f;return 0==this.mBones.length&&(f=new THREE.Mesh(i,t)),this.mBones.length>0&&(f=new THREE.SkinnedMesh(i,t)),this.threeNode=f,f}}function o(){this.mNumIndices=0,this.mIndices=[]}function h(){this.x=0,this.y=0,this.z=0,this.toTHREE=function(){return new THREE.Vector3(this.x,this.y,this.z)}}function u(){this.r=0,this.g=0,this.b=0,this.a=0,this.toTHREE=function(){return new THREE.Color(this.r,this.g,this.b,1)}}function f(){this.x=0,this.y=0,this.z=0,this.w=0,this.toTHREE=function(){return new THREE.Quaternion(this.x,this.y,this.z,this.w)}}function l(){this.mVertexId=0,this.mWeight=0}function c(){this.data=[],this.toString=function(){var e="";return this.data.forEach(function(t){e+=String.fromCharCode(t)}),e.replace(/[^\x20-\x7E]+/g,"")}}function d(){this.mTime=0,this.mValue=null}function p(){this.mTime=0,this.mValue=null}function y(){this.mName="",this.mTransformation=[],this.mNumChildren=0,this.mNumMeshes=0,this.mMeshes=[],this.mChildren=[],this.toTHREE=function(e){if(this.threeNode)return this.threeNode;var t=new THREE.Object3D;t.name=this.mName,t.matrix=this.mTransformation.toTHREE();for(var i=0;i<this.mChildren.length;i++)t.add(this.mChildren[i].toTHREE(e));for(var i=0;i<this.mMeshes.length;i++)t.add(e.mMeshes[this.mMeshes[i]].toTHREE(e));return this.threeNode=t,t.matrix.decompose(t.position,t.quaternion,t.scale),t}}function g(){this.mName="",this.mNumWeights=0,this.mOffsetMatrix=0}function N(){this.mKey="",this.mSemantic=0,this.mIndex=0,this.mData=[],this.mDataLength=0,this.mType=0,this.dataAsColor=function(){var e=new Uint8Array(this.mData).buffer,t=new DataView(e),i=t.getFloat32(0,!0),r=t.getFloat32(4,!0),n=t.getFloat32(8,!0);return new THREE.Color(i,r,n)},this.dataAsFloat=function(){var e=new Uint8Array(this.mData).buffer,t=new DataView(e),i=t.getFloat32(0,!0);return i},this.dataAsBool=function(){var e=new Uint8Array(this.mData).buffer,t=new DataView(e),i=t.getFloat32(0,!0);return!!i},this.dataAsString=function(){var e=new c;return e.data=this.mData,e.toString()},this.dataAsMap=function(e){var t=e.baseURL;t=t.substr(0,t.lastIndexOf("/")+1);var i=new c;i.data=this.mData;var r=i.toString();return r=r.replace(/\\/g,"/"),r.indexOf("/")!=-1&&(r=r.substr(r.lastIndexOf("/")+1)),THREE.ImageUtils.loadTexture(t+r)}}function v(){this.mNumAllocated=0,this.mNumProperties=0,this.mProperties=[],this.toTHREE=function(e){for(var t=(this.mProperties[0].dataAsString(),new THREE.MeshPhongMaterial),i=0;i<this.mProperties.length;i++)if("float"==Ve[this.mProperties[i].mKey]&&(t[Se[this.mProperties[i].mKey]]=this.mProperties[i].dataAsFloat()),"color"==Ve[this.mProperties[i].mKey]&&(t[Se[this.mProperties[i].mKey]]=this.mProperties[i].dataAsColor()),"bool"==Ve[this.mProperties[i].mKey]&&(t[Se[this.mProperties[i].mKey]]=this.mProperties[i].dataAsBool()),"string"==Ve[this.mProperties[i].mKey]&&(t[Se[this.mProperties[i].mKey]]=this.mProperties[i].dataAsString()),"map"==Ve[this.mProperties[i].mKey]){var r=this.mProperties[i];r.mSemantic==ke&&(t.map=this.mProperties[i].dataAsMap(e)),r.mSemantic==Me&&(t.normalMap=this.mProperties[i].dataAsMap(e)),r.mSemantic==He&&(t.lightMap=this.mProperties[i].dataAsMap(e)),r.mSemantic==be&&(t.alphaMap=this.mProperties[i].dataAsMap(e))}return t.ambient.r=.53,t.ambient.g=.53,t.ambient.b=.53,t.color.r=1,t.color.g=1,t.color.b=1,t}}function T(e,t,i){var r=new THREE.Vector3,n=1-i;return r.x=e.x*i+t.x*n,r.y=e.y*i+t.y*n,r.z=e.z*i+t.z*n,r}function E(e,t,i){return e.clone().slerp(t,1-i)}function A(e,t,i,r){if(1==e.length)return e[0].mValue.toTHREE();for(var n=1/0,s=null,a=null,m=0;m<e.length;m++){var o=Math.abs(e[m].mTime-t);o<n&&e[m].mTime<=t&&(n=o,s=e[m],a=e[m+1])}if(!s)return null;if(s&&a){var h=a.mTime-s.mTime,u=s.mTime-t,f=u/h;return r(s.mValue.toTHREE(),a.mValue.toTHREE(),f)}a=e[0].clone(),a.mTime+=i;var h=a.mTime-s.mTime,u=s.mTime-t,f=u/h;return r(s.mValue.toTHREE(),a.mValue.toTHREE(),f)}function w(){this.mNodeName="",this.mNumPositionKeys=0,this.mNumRotationKeys=0,this.mNumScalingKeys=0,this.mPositionKeys=[],this.mRotationKeys=[],this.mScalingKeys=[],this.mPreState="",this.mPostState="",this.init=function(e){function t(t){t.mTime/=e}e||(e=1),this.mPositionKeys.forEach(t),this.mRotationKeys.forEach(t),this.mScalingKeys.forEach(t)},this.sortKeys=function(){function e(e,t){return e.mTime-t.mTime}this.mPositionKeys.sort(e),this.mRotationKeys.sort(e),this.mScalingKeys.sort(e)},this.getLength=function(){return Math.max(Math.max.apply(null,this.mPositionKeys.map(function(e){return e.mTime})),Math.max.apply(null,this.mRotationKeys.map(function(e){return e.mTime})),Math.max.apply(null,this.mScalingKeys.map(function(e){return e.mTime})))},this.toTHREE=function(e,t){this.sortKeys();for(var i=this.getLength(),r=new oe.KeyFrameTrack,n=0;n<i;n+=.05){var s=new THREE.Matrix4,a=n,m=A(this.mPositionKeys,a,i,T),o=A(this.mScalingKeys,a,i,T),h=A(this.mRotationKeys,a,i,E);s.compose(m,h,o);var u=new oe.KeyFrame(a,s);r.addKey(u)}r.target=e.findNode(this.mNodeName).toTHREE();var f=[r];if(e.nodeToBoneMap[this.mNodeName])for(var n=0;n<e.nodeToBoneMap[this.mNodeName].length;n++){var l=r.clone();l.target=e.nodeToBoneMap[this.mNodeName][n],f.push(l)}return f}}function n(){this.mName="",this.mDuration=0,this.mTicksPerSecond=0,this.mNumChannels=0,this.mChannels=[],this.toTHREE=function(e){var t=new oe.Animation;for(var i in this.mChannels){this.mChannels[i].init(this.mTicksPerSecond);var r=this.mChannels[i].toTHREE(e);for(var n in r)r[n].init(),t.addTrack(r[n])}return t.length=Math.max.apply(null,t.tracks.map(function(e){return e.length})),t}}function x(){this.mWidth=0,this.mHeight=0,this.texAchFormatHint=[],this.pcData=[]}function R(){this.mName="",this.mType=0,this.mAttenuationConstant=0,this.mAttenuationLinear=0,this.mAttenuationQuadratic=0,this.mAngleInnerCone=0,this.mAngleOuterCone=0,this.mColorDiffuse=null,this.mColorSpecular=null,this.mColorAmbient=null}function B(){this.mName="",this.mPosition=null,this.mLookAt=null,this.mUp=null,this.mHorizontalFOV=0,this.mClipPlaneNear=0,this.mClipPlaneFar=0,this.mAspect=0}function C(){this.mFlags=0,this.mNumMeshes=0,this.mNumMaterials=0,this.mNumAnimations=0,this.mNumTextures=0,this.mNumLights=0,this.mNumCameras=0,this.mRootNode=null,this.mMeshes=[],this.mMaterials=[],this.mAnimations=[],this.mLights=[],this.mCameras=[],this.nodeToBoneMap={},this.findNode=function(e,t){if(t||(t=this.mRootNode),t.mName==e)return t;for(var i=0;i<t.mChildren.length;i++){var r=this.findNode(e,t.mChildren[i]);if(r)return r}return null},this.toTHREE=function(){this.nodeCount=0,i(this);var e=this.mRootNode.toTHREE(this);for(var t in this.mMeshes)this.mMeshes[t].hookupSkeletons(this,e);if(this.mAnimations.length>0)var r=this.mAnimations[0].toTHREE(this);return{object:e,animation:r}}}function K(){this.elements=[[],[],[],[]],this.toTHREE=function(){for(var e=new THREE.Matrix4,t=0;t<4;++t)for(var i=0;i<4;++i)e.elements[4*t+i]=this.elements[i][t];return e}}function k(e){var t=e.getFloat32(e.readOffset,Fe);return e.readOffset+=4,t}function M(e){var t=e.getFloat64(e.readOffset,Fe);return e.readOffset+=8,t}function b(e){var t=e.getUint8(e.readOffset);return e.readOffset+=1,t}function H(e){var t=e.getUint16(e.readOffset,Fe);return e.readOffset+=2,t}function P(e){var t=e.getUint32(e.readOffset,Fe);return e.readOffset+=4,t}function S(e){var t=e.getUint32(e.readOffset,Fe);return e.readOffset+=4,t}function V(e){var t=new h;return t.x=k(e),t.y=k(e),t.z=k(e),t}function F(e){var t=new u;return t.r=k(e),t.g=k(e),t.b=k(e),t}function I(e){var t=new f;return t.w=k(e),t.x=k(e),t.y=k(e),t.z=k(e),t}function O(e){var t=new c,i=P(e);return e.ReadBytes(t.data,1,i),t.toString()}function D(e){var t=new l;return t.mVertexId=P(e),t.mWeight=k(e),t}function U(e){for(var t=new K,i=0;i<4;++i)for(var r=0;r<4;++r)t.elements[i][r]=k(e);return t}function $(e){var t=new d;return t.mTime=M(e),t.mValue=V(e),t}function L(e){var t=new p;return t.mTime=M(e),t.mValue=I(e),t}function W(e,t,i){for(var r=0;r<i;r++)t[r]=D(e)}function z(e,t,i){for(var r=0;r<i;r++)t[r]=$(e)}function q(e,t,i){for(var r=0;r<i;r++)t[r]=L(e)}function Q(e,t,i){return e.Seek(sizeof(t)*i,Ie)}function _(e){if(!e)throw"asset failed"}function j(e,t,i){var r=S(e);_(r==ge),S(e);var n=new y;if(n.mParent=t,n.mDepth=i,n.mName=O(e),n.mTransformation=U(e),n.mNumChildren=P(e),n.mNumMeshes=P(e),n.mNumMeshes){n.mMeshes=[];for(var s=0;s<n.mNumMeshes;++s)n.mMeshes[s]=P(e)}if(n.mNumChildren){n.mChildren=[];for(var s=0;s<n.mNumChildren;++s){var a=j(e,n,i++);n.mChildren[s]=a}}return n}function G(e,t){var i=S(e);return _(i==pe),S(e),t.mName=O(e),t.mNumWeights=P(e),t.mOffsetMatrix=U(e),shortened?Q(e,t.mWeights,t.mNumWeights):(t.mWeights=[],W(e,t.mWeights,t.mNumWeights)),t}function X(i,r){var n=S(i);_(n==le),S(i),r.mPrimitiveTypes=P(i),r.mNumVertices=P(i),r.mNumFaces=P(i),r.mNumBones=P(i),r.mMaterialIndex=P(i),r.mNumUVComponents=[];var s=P(i);s&Te&&(shortened?Q(i,r.mVertices,r.mNumVertices):(r.mVertices=[],r.mVertexBuffer=i.subArray32(i.readOffset,i.readOffset+3*r.mNumVertices*4),i.Seek(3*r.mNumVertices*4,Ie))),s&Ee&&(shortened?Q(i,r.mNormals,r.mNumVertices):(r.mNormals=[],r.mNormalBuffer=i.subArray32(i.readOffset,i.readOffset+3*r.mNumVertices*4),i.Seek(3*r.mNumVertices*4,Ie))),s&Ae&&(shortened?(Q(i,r.mTangents,r.mNumVertices),Q(i,r.mBitangents,r.mNumVertices)):(r.mTangents=[],r.mTangentBuffer=i.subArray32(i.readOffset,i.readOffset+3*r.mNumVertices*4),i.Seek(3*r.mNumVertices*4,Ie),r.mBitangents=[],r.mBitangentBuffer=i.subArray32(i.readOffset,i.readOffset+3*r.mNumVertices*4),i.Seek(3*r.mNumVertices*4,Ie)));for(var a=0;a<Re&&s&t(a);++a)shortened?Q(i,r.mColors[a],r.mNumVertices):(r.mColors[a]=[],r.mColorBuffer=i.subArray32(i.readOffset,i.readOffset+4*r.mNumVertices*4),i.Seek(4*r.mNumVertices*4,Ie));r.mTexCoordsBuffers=[];for(var a=0;a<Be&&s&e(a);++a)if(r.mNumUVComponents[a]=P(i),shortened)Q(i,r.mTextureCoords[a],r.mNumVertices);else{r.mTextureCoords[a]=[],r.mTexCoordsBuffers[a]=[];for(var m=0;m<r.mNumVertices;m++)r.mTexCoordsBuffers[a].push(k(i)),r.mTexCoordsBuffers[a].push(k(i)),k(i)}if(shortened)P(i);else{r.mFaces=[];r.mIndexArray=[];for(var h=0;h<r.mNumFaces;++h){var u=r.mFaces[h]=new o;u.mNumIndices=H(i),u.mIndices=[];for(var f=0;f<u.mNumIndices;++f)r.mNumVertices<65536?u.mIndices[f]=H(i):u.mIndices[f]=P(i);if(3===u.mNumIndices)r.mIndexArray.push(u.mIndices[0]),r.mIndexArray.push(u.mIndices[1]),r.mIndexArray.push(u.mIndices[2]);else{if(4!==u.mNumIndices)throw new Error("Sorry, can't currently triangulate polys. Use the triangulate preprocessor in Assimp.");r.mIndexArray.push(u.mIndices[0]),r.mIndexArray.push(u.mIndices[1]),r.mIndexArray.push(u.mIndices[2]),r.mIndexArray.push(u.mIndices[2]),r.mIndexArray.push(u.mIndices[3]),r.mIndexArray.push(u.mIndices[0])}}}if(r.mNumBones){r.mBones=[];for(var f=0;f<r.mNumBones;++f)r.mBones[f]=new g,G(i,r.mBones[f])}}function J(e,t){var i=S(e);_(i==ve),S(e),t.mKey=O(e),t.mSemantic=P(e),t.mIndex=P(e),t.mDataLength=P(e),t.mType=P(e),t.mData=[],e.ReadBytes(t.mData,1,t.mDataLength)}function Y(e,t){var i=S(e);if(_(i==Ne),S(e),t.mNumAllocated=t.mNumProperties=P(e),t.mNumProperties){t.mProperties&&delete t.mProperties,t.mProperties=[];for(var r=0;r<t.mNumProperties;++r)t.mProperties[r]=new N,J(e,t.mProperties[r])}}function Z(e,t){var i=S(e);_(i==ce),S(e),t.mNodeName=O(e),t.mNumPositionKeys=P(e),t.mNumRotationKeys=P(e),t.mNumScalingKeys=P(e),t.mPreState=P(e),t.mPostState=P(e),t.mNumPositionKeys&&(shortened?Q(e,t.mPositionKeys,t.mNumPositionKeys):(t.mPositionKeys=[],z(e,t.mPositionKeys,t.mNumPositionKeys))),t.mNumRotationKeys&&(shortened?Q(e,t.mRotationKeys,t.mNumRotationKeys):(t.mRotationKeys=[],q(e,t.mRotationKeys,t.mNumRotationKeys))),t.mNumScalingKeys&&(shortened?Q(e,t.mScalingKeys,t.mNumScalingKeys):(t.mScalingKeys=[],z(e,t.mScalingKeys,t.mNumScalingKeys)))}function ee(e,t){var i=S(e);if(_(i==ye),S(e),t.mName=O(e),t.mDuration=M(e),t.mTicksPerSecond=M(e),t.mNumChannels=P(e),t.mNumChannels){t.mChannels=[];for(var r=0;r<t.mNumChannels;++r)t.mChannels[r]=new w,Z(e,t.mChannels[r])}}function te(e,t){var i=S(e);_(i==fe),S(e),t.mWidth=P(e),t.mHeight=P(e),e.ReadBytes(t.achFormatHint,1,4),shortened||(t.mHeight?(t.pcData=[],e.ReadBytes(t.pcData,1,t.mWidth*t.mHeight*4)):(t.pcData=[],e.ReadBytes(t.pcData,1,t.mWidth)))}function ie(e,t){var i=S(e);_(i==ue),S(e),t.mName=O(e),t.mType=P(e),t.mType!=Ce&&(t.mAttenuationConstant=k(e),t.mAttenuationLinear=k(e),t.mAttenuationQuadratic=k(e)),t.mColorDiffuse=F(e),t.mColorSpecular=F(e),t.mColorAmbient=F(e),t.mType==Ke&&(t.mAngleInnerCone=k(e),t.mAngleOuterCone=k(e))}function re(e,t){var i=S(e);_(i==he),S(e),t.mName=O(e),t.mPosition=V(e),t.mLookAt=V(e),t.mUp=V(e),t.mHorizontalFOV=k(e),t.mClipPlaneNear=k(e),t.mClipPlaneFar=k(e),t.mAspect=k(e)}function ne(e,t){var i=S(e);if(_(i==de),S(e),t.mFlags=P(e),t.mNumMeshes=P(e),t.mNumMaterials=P(e),t.mNumAnimations=P(e),t.mNumTextures=P(e),t.mNumLights=P(e),t.mNumCameras=P(e),t.mRootNode=new y,t.mRootNode=j(e,null,0),t.mNumMeshes){t.mMeshes=[];for(var r=0;r<t.mNumMeshes;++r)t.mMeshes[r]=new m,X(e,t.mMeshes[r])}if(t.mNumMaterials){t.mMaterials=[];for(var r=0;r<t.mNumMaterials;++r)t.mMaterials[r]=new v,Y(e,t.mMaterials[r])}if(t.mNumAnimations){t.mAnimations=[];for(var r=0;r<t.mNumAnimations;++r)t.mAnimations[r]=new n,ee(e,t.mAnimations[r])}if(t.mNumTextures){t.mTextures=[];for(var r=0;r<t.mNumTextures;++r)t.mTextures[r]=new x,te(e,t.mTextures[r])}if(t.mNumLights){t.mLights=[];for(var r=0;r<t.mNumLights;++r)t.mLights[r]=new R,ie(e,t.mLights[r])}if(t.mNumCameras){t.mCameras=[];for(var r=0;r<t.mNumCameras;++r)t.mCameras[r]=new B,re(e,t.mCameras[r])}}function se(e){e.readOffset=0,e.Seek=function(t,i){i==Ie&&(e.readOffset+=t),i==Oe&&(e.readOffset=t)},e.ReadBytes=function(e,t,i){for(var r=t*i,n=0;n<r;n++)e[n]=b(this)},e.subArray32=function(e,t){var i=this.buffer,r=i.slice(e,t);return new Float32Array(r)},e.subArrayUint16=function(e,t){var i=this.buffer,r=i.slice(e,t);return new Uint16Array(r)},e.subArrayUint8=function(e,t){var i=this.buffer,r=i.slice(e,t);return new Uint8Array(r)},e.subArrayUint32=function(e,t){var i=this.buffer,r=i.slice(e,t);return new Uint32Array(r)}}function ae(){this.load=function(e,t){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onerror=function(e){t(e)},i.onload=function(i){try{var r=performance.now(),n=me(this.response,e);console.info("Parse in "+(performance.now()-r)),t(null,n)}catch(e){t(e)}},i.send()}}function me(e,t){var i=new C;i.baseURL=t;var r=new DataView(e);se(r),r.Seek(44,Ie);P(r),P(r),P(r),P(r);if(shortened=H(r)>0,compressed=H(r)>0,shortened)throw"Shortened binaries are not supported!";if(r.Seek(256,Ie),r.Seek(128,Ie),r.Seek(64,Ie),!compressed)return ne(r,i),i.toTHREE();var n=S(r),s=r.FileSize()-r.Tell(),a=[];r.Read(a,1,s);var m=[];uncompress(m,n,a,s);var o=new ArrayBuffer(m);ne(o,i)}var oe={};oe.KeyFrame=function(e,t){this.time=e,this.matrix=t.clone(),this.position=new THREE.Vector3,this.quaternion=new THREE.Quaternion,this.scale=new THREE.Vector3(1,1,1),this.matrix.decompose(this.position,this.quaternion,this.scale),this.clone=function(){var e=new oe.KeyFrame(this.time,this.matrix);return e},this.lerp=function(e,t){t-=this.time;var i=e.time-this.time,r=t/i,n=1-r,s=this.position,a=this.quaternion,m=e.position,o=e.quaternion;return oe.KeyFrame.tempAniPos.x=s.x*n+m.x*r,oe.KeyFrame.tempAniPos.y=s.y*n+m.y*r,oe.KeyFrame.tempAniPos.z=s.z*n+m.z*r,oe.KeyFrame.tempAniQuat.set(a.x,a.y,a.z,a.w),oe.KeyFrame.tempAniQuat.slerp(o,r),oe.KeyFrame.tempAniMatrix.compose(oe.KeyFrame.tempAniPos,oe.KeyFrame.tempAniQuat,oe.KeyFrame.tempAniScale)}},oe.KeyFrame.tempAniPos=new THREE.Vector3,oe.KeyFrame.tempAniQuat=new THREE.Quaternion,oe.KeyFrame.tempAniScale=new THREE.Vector3(1,1,1),oe.KeyFrame.tempAniMatrix=new THREE.Matrix4,oe.KeyFrameTrack=function(){this.keys=[],this.target=null,this.time=0,this.length=0,this._accelTable={},this.fps=20,this.addKey=function(e){this.keys.push(e)},this.init=function(){if(this.sortKeys(),this.keys.length>0?this.length=this.keys[this.keys.length-1].time:this.length=0,this.fps)for(var e=0;e<this.length*this.fps;e++)for(var t=0;t<this.keys.length;t++){if(this.keys[t].time==e){this._accelTable[e]=t;break}if(this.keys[t].time<e/this.fps&&this.keys[t+1]&&this.keys[t+1].time>=e/this.fps){this._accelTable[e]=t;break}}},this.parseFromThree=function(e){var t=e.fps;this.target=e.node;for(var i=e.hierarchy[0].keys,r=0;r<i.length;r++)this.addKey(new oe.KeyFrame(r/t||i[r].time,i[r].targets[0].data));this.init()},this.parseFromCollada=function(e){for(var t=e.keys,i=this.fps,r=0;r<t.length;r++)this.addKey(new oe.KeyFrame(r/i||t[r].time,t[r].matrix));this.init()},this.sortKeys=function(){this.keys.sort(this.keySortFunc)},this.keySortFunc=function(e,t){return e.time-t.time},this.clone=function(){var e=new oe.KeyFrameTrack;e.target=this.target,e.time=this.time,e.length=this.length;for(var t=0;t<this.keys.length;t++)e.addKey(this.keys[t].clone());return e.init(),e},this.reTarget=function(e,t){t||(t=oe.TrackTargetNodeNameCompare),this.target=t(e,this.target)},this.keySearchAccel=function(e){return e*=this.fps,e=Math.floor(e),this._accelTable[e]||0},this.setTime=function(e){e=Math.abs(e),this.length&&(e=e%this.length+.05);for(var t=null,i=null,r=this.keySearchAccel(e);r<this.keys.length;r++){if(this.keys[r].time==e){t=this.keys[r],i=this.keys[r];break}if(this.keys[r].time<e&&this.keys[r+1]&&this.keys[r+1].time>e){t=this.keys[r],i=this.keys[r+1];break}if(this.keys[r].time<e&&r==this.keys.length-1){t=this.keys[r],i=this.keys[0].clone(),i.time+=this.length+.05;break}}return t&&i&&t!==i?(this.target.matrixAutoUpdate=!1,this.target.matrix.copy(t.lerp(i,e)),void(this.target.matrixWorldNeedsUpdate=!0)):t&&i&&t==i?(this.target.matrixAutoUpdate=!1,this.target.matrix.copy(t.matrix),void(this.target.matrixWorldNeedsUpdate=!0)):void 0}},oe.TrackTargetNodeNameCompare=function(e,t){function i(e,t){if(e.name==t)return e;for(var r=0;r<e.children.length;r++){var n=i(e.children[r],t);if(n)return n}return null}return i(e,t.name)},oe.Animation=function(){this.tracks=[],this.length=0,this.addTrack=function(e){this.tracks.push(e),this.length=Math.max(e.length,this.length)},this.setTime=function(e){this.time=e;for(var t=0;t<this.tracks.length;t++)this.tracks[t].setTime(e)},this.clone=function(e,t){t||(t=oe.TrackTargetNodeNameCompare);var i=new oe.Animation;i.target=e;for(var r=0;r<this.tracks.length;r++){var n=this.tracks[r].clone();n.reTarget(e,t),i.addTrack(n)}return i}};var he=4660,ue=4661,fe=4662,le=4663,ce=4664,de=4665,pe=4666,ye=4667,ge=4668,Ne=4669,ve=4670,Te=1,Ee=2,Ae=4,we=256,xe=65536,Re=1,Be=4,Ce=1,Ke=3,ke=1,Me=6,be=8,He=10,Pe=4,Se={"?mat.name":"name","$mat.shadingm":"shading","$mat.twosided":"twoSided","$mat.wireframe":"wireframe","$clr.ambient":"ambient","$clr.diffuse":"color","$clr.specular":"specular","$clr.emissive":"emissive","$clr.transparent":"transparent","$clr.reflective":"reflect","$mat.shininess":"shininess","$mat.reflectivity":"reflectivity","$mat.refracti":"refraction","$tex.file":"map"},Ve={"?mat.name":"string","$mat.shadingm":"bool","$mat.twosided":"bool","$mat.wireframe":"bool","$clr.ambient":"color","$clr.diffuse":"color","$clr.specular":"color","$clr.emissive":"color","$clr.transparent":"color","$clr.reflective":"color","$mat.shininess":"float","$mat.reflectivity":"float","$mat.refracti":"float","$tex.file":"map"},Fe=!0,Ie=0,Oe=1;THREE.AssimpLoader=ae}();