<!DOCTYPE html><html lang="en"><head>
		<title>three.js webgl - modifier - Subdivisions using Loop Subdivision Scheme</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,user-scalable=no,minimum-scale=1,maximum-scale=1">
		<style>
			body {
				font-family: Monospace;
				background-color: #f0f0f0;
				margin: 0px;
				overflow: hidden;
			}
		</style>
	</head>
	<body>

		<script src="../build/three.js"></script>
		<script src="js/controls/OrbitControls.js"></script>
		<script src="js/modifiers/BufferSubdivisionModifier.js"></script>
		<script src="js/libs/stats.min.js"></script>

		<script>function nextSubdivision(e){subdivisions=Math.max(0,subdivisions+e),addStuff()}function nextGeometry(){geometryIndex++,geometryIndex>geometriesParams.length-1&&(geometryIndex=0),addStuff()}function switchGeometry(e){geometryIndex=e,addStuff()}function updateInfo(){for(var e=geometriesParams[geometryIndex],r='<select id="dropdown" onchange="switchGeometry(this.value)">',t=0;t<geometriesParams.length;t++)r+='<option value="'+t+'"',r+=geometryIndex==t?" selected":"",r+=">"+geometriesParams[t].type+"</option>";r+="</select>",info.innerHTML="Drag to spin THREE."+e.type+"<br><br>Subdivisions: "+subdivisions+' <a href="#" onclick="nextSubdivision(1); return false;">more</a>/<a href="#" onclick="nextSubdivision(-1); return false;">less</a><br>Geometry: '+r+' <a href="#" onclick="nextGeometry();return false;">next</a><br><br>Vertices count: before '+geometry.vertices.length+" after "+smooth.attributes.position.array.length/3+"<br>Face count: before "+geometry.faces.length+" after "+smooth.attributes.position.array.length/3}function addStuff(){void 0!==cube&&(geometry.dispose(),material.dispose(),smooth.dispose(),scene.remove(group),scene.remove(cube));var e=new THREE.BufferSubdivisionModifier(subdivisions),r=geometriesParams[geometryIndex];geometry=createSomething(THREE[r.type],r.args),r.scale&&geometry.scale(r.scale,r.scale,r.scale),smooth=e.modify(geometry),updateInfo();for(var t=new TypedArrayHelper(0,1,THREE.Color,Float32Array,3,["r","g","b"]),n=0;n<smooth.attributes.position.array.length/3;n++){var o=smooth.attributes.position.array[3*n+1]/200+.5;t.register[0].setHSL(o,1,.5),t.push_element(t.register[0])}t.trim_size(),smooth.addAttribute("color",new THREE.BufferAttribute(t.buffer,3)),group=new THREE.Group,scene.add(group),material=new THREE.MeshBasicMaterial({color:16777215,wireframe:!0}),mesh=new THREE.Mesh(geometry,material),group.add(mesh);var a=[new THREE.MeshPhongMaterial({color:16777215,shading:THREE.FlatShading,vertexColors:THREE.VertexColors}),new THREE.MeshBasicMaterial({color:0,wireframe:!0,opacity:.15,transparent:!0})];cube=THREE.SceneUtils.createMultiMaterialObject(smooth,a),cube.scale.setScalar(r.meshScale?r.meshScale:1),scene.add(cube),group.scale.copy(cube.scale)}function init(){container=document.createElement("div"),document.body.appendChild(container),info=document.createElement("div"),info.style.position="absolute",info.style.top="10px",info.style.width="100%",info.style.textAlign="center",info.innerHTML="Drag to spin the geometry ",container.appendChild(info),camera=new THREE.PerspectiveCamera(70,window.innerWidth/window.innerHeight,1,1e3),camera.position.z=500,scene=new THREE.Scene;var e=new THREE.PointLight(16777215,1.5);e.position.set(1e3,1e3,2e3),scene.add(e),addStuff(),renderer=new THREE.WebGLRenderer({antialias:!0}),renderer.setClearColor(15790320),renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth,window.innerHeight),container.appendChild(renderer.domElement),stats=new Stats,container.appendChild(stats.dom),controls=new THREE.OrbitControls(camera,renderer.domElement),window.addEventListener("resize",onWindowResize,!1)}function onWindowResize(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}function animate(){requestAnimationFrame(animate),controls.update(),stats.begin(),render(),stats.end()}function render(){renderer.render(scene,camera)}for(var container,stats,camera,controls,scene,renderer,cube,mesh,material,createSomething=function(e,r){var t=function(e,r){return e.apply(this,r)};return t.prototype=e.prototype,new t(e,r)},materials=[],i=0;i<6;i++)materials.push([new THREE.MeshBasicMaterial({color:16777215*Math.random(),wireframe:!1})]);var geometriesParams=[{type:"BoxGeometry",args:[200,200,200,2,2,2,materials]},{type:"TorusGeometry",args:[100,60,4,8,2*Math.PI]},{type:"TorusKnotGeometry",args:[],scale:.25,meshScale:4},{type:"SphereGeometry",args:[100,3,3],meshScale:2},{type:"IcosahedronGeometry",args:[100,1],meshScale:2},{type:"CylinderGeometry",args:[25,75,200,8,3]},{type:"OctahedronGeometry",args:[200,0],meshScale:2},{type:"LatheGeometry",args:[[new THREE.Vector2(0,0),new THREE.Vector2(50,50),new THREE.Vector2(10,100),new THREE.Vector2(50,150),new THREE.Vector2(0,200)]]},{type:"TextGeometry",args:["&",{size:200,height:50,curveSegments:1}]},{type:"PlaneGeometry",args:[200,200,4,4]}],loader=new THREE.FontLoader;loader.load("fonts/helvetiker_regular.typeface.json",function(e){geometriesParams[8].args[1].font=e});var loader=new THREE.JSONLoader;loader.load("obj/WaltHeadLo.js",function(e){geometriesParams.push({type:"WaltHead",args:[],meshScale:6}),THREE.WaltHead=function(){return e.clone()},updateInfo()});var loader2=new THREE.JSONLoader;loader2.load("obj/Suzanne.js",function(e){geometriesParams.push({type:"Suzanne",args:[],scale:100,meshScale:2}),THREE.Suzanne=function(){return e.clone()},updateInfo()});var info,subdivisions=2,geometryIndex=0;init(),animate();</script>

	

</body></html>