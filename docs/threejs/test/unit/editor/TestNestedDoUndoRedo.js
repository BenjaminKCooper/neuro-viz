module("NestedDoUndoRedo"),test("Test nested Do's, Undo's and Redo's",function(){var o=new Editor,t=aBox("One box unlike all others"),e=2,i=3,c=4,r=12,s=13,n=14,a=22,O=23,l=24;t.position.x=e,t.position.y=i,t.position.z=c,t.rotation.x=r,t.rotation.y=s,t.rotation.z=n,t.scale.x=a,t.scale.y=O,t.scale.z=l,o.execute(new AddObjectCommand(t));var k=new THREE.Vector3(e+100,i,c);o.execute(new SetPositionCommand(t,k));var K=new THREE.Euler(r,s+1e3,n);o.execute(new SetRotationCommand(t,K));var d=new THREE.Vector3(a,O,l+1e4);o.execute(new SetScaleCommand(t,d)),ok(102==t.position.x,"OK, X position is correct "),ok(3==t.position.y,"OK, Y position is correct "),ok(4==t.position.z,"OK, Z position is correct "),ok(12==t.rotation.x,"OK, X rotation is correct "),ok(1013==t.rotation.y,"OK, Y rotation is correct "),ok(14==t.rotation.z,"OK, Z rotation is correct "),ok(22==t.scale.x,"OK, X scale is correct "),ok(23==t.scale.y,"OK, Y scale is correct "),ok(10024==t.scale.z,"OK, Z scale is correct "),o.undo(),o.undo(),o.undo(),ok(2==t.position.x,"OK, X position is correct "),ok(3==t.position.y,"OK, Y position is correct "),ok(4==t.position.z,"OK, Z position is correct "),ok(12==t.rotation.x,"OK, X rotation is correct "),ok(13==t.rotation.y,"OK, Y rotation is correct "),ok(14==t.rotation.z,"OK, Z rotation is correct "),ok(22==t.scale.x,"OK, X scale is correct "),ok(23==t.scale.y,"OK, Y scale is correct "),ok(24==t.scale.z,"OK, Z scale is correct "),o.redo(),o.redo(),o.execute(new RemoveObjectCommand(t)),ok(0==o.scene.children.length,"OK, object removal was successful"),o.undo(),ok(1013==t.rotation.y,"OK, Y rotation is correct "),o.undo(),ok(102==t.position.x,"OK, X position is correct "),ok(3==t.position.y,"OK, Y position is correct "),ok(4==t.position.z,"OK, Z position is correct "),ok(12==t.rotation.x,"OK, X rotation is correct "),ok(13==t.rotation.y,"OK, Y rotation is correct "),ok(14==t.rotation.z,"OK, Z rotation is correct "),ok(22==t.scale.x,"OK, X scale is correct "),ok(23==t.scale.y,"OK, Y scale is correct "),ok(24==t.scale.z,"OK, Z scale is correct ")});