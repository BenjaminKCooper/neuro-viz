module("TestCmdSetScene"),test("Test for SetSceneCommand (Undo and Redo)",function(){var e=new Editor;objects=[aBox(),aSphere(),aPointlight()];var n=objects.map(function(n){e=new Editor;var a=new AddObjectCommand(n);return a.updatable=!1,e.execute(a),{obj:n,exportedData:exportScene(e)}});e=new Editor,n.map(function(n){var a=importScene(n.exportedData),o=new SetSceneCommand(a);o.updatable=!1,e.execute(o)}),ok(e.scene.children.length=n.length,"OK, all scenes have been merged");for(var a=0;a<e.scene.children.length;)ok(e.scene.children[a].name==n[a].obj.name,"OK, editor.scene.children[ "+a+" ].name matches scenes[ "+a+" ].obj.name"),a++;e.undo();for(var a=0;a<e.scene.children.length;)ok(e.scene.children[a].name==n[a].obj.name,"OK, editor.scene.children[ "+a+" ].name matches scenes[ "+a+" ].obj.name after undo"),a++;e.redo();for(var a=0;a<e.scene.children.length;)ok(e.scene.children[a].name==n[a].obj.name,"OK, editor.scene.children[ "+a+" ].name matches scenes[ "+a+" ].obj.name after redo"),a++});