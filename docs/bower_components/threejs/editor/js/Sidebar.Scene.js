Sidebar.Scene=function(e){function n(e,n){var t=document.createElement("div");return t.draggable=n,t.innerHTML=a(e),t.value=e.id,t}function a(e){var n='<span class="type '+e.type+'"></span> '+e.name;if(e instanceof THREE.Mesh){var a=e.geometry,o=e.material;n+=' <span class="type '+a.type+'"></span> '+a.name,n+=' <span class="type '+o.type+'"></span> '+o.name}return n+=t(e.uuid)}function t(n){return void 0!==e.scripts[n]?' <span class="type Script"></span>':""}function o(){i.sceneBackgroundChanged.dispatch(p.getHexValue())}function s(){i.sceneFogChanged.dispatch(h.getValue(),x.getHexValue(),V.getValue(),I.getValue(),w.getValue())}function d(){var a=e.camera,t=e.scene,o=[];o.push(n(a,!1)),o.push(n(t,!1)),function e(a,t){for(var s=0,d=a.length;s<d;s++){var r=a[s],i=n(r,!0);i.style.paddingLeft=10*t+"px",o.push(i),e(r.children,t+1)}}(t.children,1),g.setOptions(o),null!==e.selected&&g.setValue(e.selected.id),t.background&&p.setHexValue(t.background.getHex()),t.fog?(x.setHexValue(t.fog.color.getHex()),t.fog instanceof THREE.Fog?(h.setValue("Fog"),V.setValue(t.fog.near),I.setValue(t.fog.far)):t.fog instanceof THREE.FogExp2&&(h.setValue("FogExp2"),w.setValue(t.fog.density))):h.setValue("None"),r()}function r(){var e=h.getValue();v.setDisplay("None"===e?"none":""),V.setDisplay("Fog"===e?"":"none"),I.setDisplay("Fog"===e?"":"none"),w.setDisplay("FogExp2"===e?"":"none")}var i=e.signals,l=new UI.Panel;l.setBorderTop("0"),l.setPaddingTop("20px");var u=!1,g=new UI.Outliner(e);g.setId("outliner"),g.onChange(function(){u=!0,e.selectById(parseInt(g.getValue())),u=!1}),g.onDblClick(function(){e.focusById(parseInt(g.getValue()))}),l.add(g),l.add(new UI.Break);var c=new UI.Row,p=(new UI.Color).setValue("#aaaaaa").onChange(o);c.add(new UI.Text("Background").setWidth("90px")),c.add(p),l.add(c);var f=new UI.Row,h=(new UI.Select).setOptions({None:"None",Fog:"Linear",FogExp2:"Exponential"}).setWidth("150px");h.onChange(function(){s(),r()}),f.add(new UI.Text("Fog").setWidth("90px")),f.add(h),l.add(f);var v=new UI.Row;v.setDisplay("none"),v.setMarginLeft("90px"),l.add(v);var x=(new UI.Color).setValue("#aaaaaa");x.onChange(s),v.add(x);var V=new UI.Number(.1).setWidth("40px").setRange(0,1/0).onChange(s);v.add(V);var I=new UI.Number(50).setWidth("40px").setRange(0,1/0).onChange(s);v.add(I);var w=new UI.Number(.05).setWidth("40px").setRange(0,.1).setPrecision(3).onChange(s);return v.add(w),d(),i.editorCleared.add(d),i.sceneGraphChanged.add(d),i.objectChanged.add(function(e){for(var n=g.options,t=0;t<n.length;t++){var o=n[t];if(o.value===e.id)return void(o.innerHTML=a(e))}}),i.objectSelected.add(function(e){u!==!0&&g.setValue(null!==e?e.id:null)}),l};