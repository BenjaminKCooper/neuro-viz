var UI={};UI.Element=function(t){this.dom=t},UI.Element.prototype={add:function(){for(var t=0;t<arguments.length;t++){var e=arguments[t];e instanceof UI.Element?this.dom.appendChild(e.dom):console.error("UI.Element:",e,"is not an instance of UI.Element.")}return this},remove:function(){for(var t=0;t<arguments.length;t++){var e=arguments[t];e instanceof UI.Element?this.dom.removeChild(e.dom):console.error("UI.Element:",e,"is not an instance of UI.Element.")}return this},clear:function(){for(;this.dom.children.length;)this.dom.removeChild(this.dom.lastChild)},setId:function(t){return this.dom.id=t,this},setClass:function(t){return this.dom.className=t,this},setStyle:function(t,e){for(var o=0;o<e.length;o++)this.dom.style[t]=e[o];return this},setDisabled:function(t){return this.dom.disabled=t,this},setTextContent:function(t){return this.dom.textContent=t,this}};var properties=["position","left","top","right","bottom","width","height","border","borderLeft","borderTop","borderRight","borderBottom","borderColor","display","overflow","margin","marginLeft","marginTop","marginRight","marginBottom","padding","paddingLeft","paddingTop","paddingRight","paddingBottom","color","background","backgroundColor","opacity","fontSize","fontWeight","textAlign","textDecoration","textTransform","cursor","zIndex"];properties.forEach(function(t){var e="set"+t.substr(0,1).toUpperCase()+t.substr(1,t.length);UI.Element.prototype[e]=function(){return this.setStyle(t,arguments),this}});var events=["KeyUp","KeyDown","MouseOver","MouseOut","Click","DblClick","Change"];events.forEach(function(t){var e="on"+t;UI.Element.prototype[e]=function(e){return this.dom.addEventListener(t.toLowerCase(),e.bind(this),!1),this}}),UI.Span=function(){return UI.Element.call(this),this.dom=document.createElement("span"),this},UI.Span.prototype=Object.create(UI.Element.prototype),UI.Span.prototype.constructor=UI.Span,UI.Div=function(){return UI.Element.call(this),this.dom=document.createElement("div"),this},UI.Div.prototype=Object.create(UI.Element.prototype),UI.Div.prototype.constructor=UI.Div,UI.Row=function(){UI.Element.call(this);var t=document.createElement("div");return t.className="Row",this.dom=t,this},UI.Row.prototype=Object.create(UI.Element.prototype),UI.Row.prototype.constructor=UI.Row,UI.Panel=function(){UI.Element.call(this);var t=document.createElement("div");return t.className="Panel",this.dom=t,this},UI.Panel.prototype=Object.create(UI.Element.prototype),UI.Panel.prototype.constructor=UI.Panel,UI.CollapsiblePanel=function(){UI.Panel.call(this),this.setClass("Panel Collapsible");var t=this;this.static=new UI.Panel,this.static.setClass("Static"),this.static.onClick(function(){t.toggle()}),this.dom.appendChild(this.static.dom),this.contents=new UI.Panel,this.contents.setClass("Content"),this.dom.appendChild(this.contents.dom);var e=new UI.Panel;return e.setClass("Button"),this.static.add(e),this.isCollapsed=!1,this},UI.CollapsiblePanel.prototype=Object.create(UI.Panel.prototype),UI.CollapsiblePanel.prototype.constructor=UI.CollapsiblePanel,UI.CollapsiblePanel.prototype.addStatic=function(){return this.static.add.apply(this.static,arguments),this},UI.CollapsiblePanel.prototype.removeStatic=function(){return this.static.remove.apply(this.static,arguments),this},UI.CollapsiblePanel.prototype.clearStatic=function(){return this.static.clear(),this},UI.CollapsiblePanel.prototype.add=function(){return this.contents.add.apply(this.contents,arguments),this},UI.CollapsiblePanel.prototype.remove=function(){return this.contents.remove.apply(this.contents,arguments),this},UI.CollapsiblePanel.prototype.clear=function(){return this.contents.clear(),this},UI.CollapsiblePanel.prototype.toggle=function(){this.setCollapsed(!this.isCollapsed)},UI.CollapsiblePanel.prototype.collapse=function(){this.setCollapsed(!0)},UI.CollapsiblePanel.prototype.expand=function(){this.setCollapsed(!1)},UI.CollapsiblePanel.prototype.setCollapsed=function(t){t?this.dom.classList.add("collapsed"):this.dom.classList.remove("collapsed"),this.isCollapsed=t,void 0!==this.onCollapsedChangeCallback&&this.onCollapsedChangeCallback(t)},UI.CollapsiblePanel.prototype.onCollapsedChange=function(t){this.onCollapsedChangeCallback=t},UI.Text=function(t){UI.Element.call(this);var e=document.createElement("span");return e.className="Text",e.style.cursor="default",e.style.display="inline-block",e.style.verticalAlign="middle",this.dom=e,this.setValue(t),this},UI.Text.prototype=Object.create(UI.Element.prototype),UI.Text.prototype.constructor=UI.Text,UI.Text.prototype.getValue=function(){return this.dom.textContent},UI.Text.prototype.setValue=function(t){return void 0!==t&&(this.dom.textContent=t),this},UI.Input=function(t){UI.Element.call(this);var e=document.createElement("input");return e.className="Input",e.style.padding="2px",e.style.border="1px solid transparent",e.addEventListener("keydown",function(t){t.stopPropagation()},!1),this.dom=e,this.setValue(t),this},UI.Input.prototype=Object.create(UI.Element.prototype),UI.Input.prototype.constructor=UI.Input,UI.Input.prototype.getValue=function(){return this.dom.value},UI.Input.prototype.setValue=function(t){return this.dom.value=t,this},UI.TextArea=function(){UI.Element.call(this);var t=document.createElement("textarea");return t.className="TextArea",t.style.padding="2px",t.spellcheck=!1,t.addEventListener("keydown",function(e){if(e.stopPropagation(),9===e.keyCode){e.preventDefault();var o=t.selectionStart;t.value=t.value.substring(0,o)+"\t"+t.value.substring(o),t.selectionStart=o+1,t.selectionEnd=t.selectionStart}},!1),this.dom=t,this},UI.TextArea.prototype=Object.create(UI.Element.prototype),UI.TextArea.prototype.constructor=UI.TextArea,UI.TextArea.prototype.getValue=function(){return this.dom.value},UI.TextArea.prototype.setValue=function(t){return this.dom.value=t,this},UI.Select=function(){UI.Element.call(this);var t=document.createElement("select");return t.className="Select",t.style.padding="2px",this.dom=t,this},UI.Select.prototype=Object.create(UI.Element.prototype),UI.Select.prototype.constructor=UI.Select,UI.Select.prototype.setMultiple=function(t){return this.dom.multiple=t,this},UI.Select.prototype.setOptions=function(t){for(var e=this.dom.value;this.dom.children.length>0;)this.dom.removeChild(this.dom.firstChild);for(var o in t){var n=document.createElement("option");n.value=o,n.innerHTML=t[o],this.dom.appendChild(n)}return this.dom.value=e,this},UI.Select.prototype.getValue=function(){return this.dom.value},UI.Select.prototype.setValue=function(t){return t=String(t),this.dom.value!==t&&(this.dom.value=t),this},UI.Checkbox=function(t){UI.Element.call(this);var e=document.createElement("input");return e.className="Checkbox",e.type="checkbox",this.dom=e,this.setValue(t),this},UI.Checkbox.prototype=Object.create(UI.Element.prototype),UI.Checkbox.prototype.constructor=UI.Checkbox,UI.Checkbox.prototype.getValue=function(){return this.dom.checked},UI.Checkbox.prototype.setValue=function(t){return void 0!==t&&(this.dom.checked=t),this},UI.Color=function(){UI.Element.call(this);var t=document.createElement("input");t.className="Color",t.style.width="64px",t.style.height="17px",t.style.border="0px",t.style.padding="2px",t.style.backgroundColor="transparent";try{t.type="color",t.value="#ffffff"}catch(t){}return this.dom=t,this},UI.Color.prototype=Object.create(UI.Element.prototype),UI.Color.prototype.constructor=UI.Color,UI.Color.prototype.getValue=function(){return this.dom.value},UI.Color.prototype.getHexValue=function(){return parseInt(this.dom.value.substr(1),16)},UI.Color.prototype.setValue=function(t){return this.dom.value=t,this},UI.Color.prototype.setHexValue=function(t){return this.dom.value="#"+("000000"+t.toString(16)).slice(-6),this},UI.Number=function(t){function e(t){t.preventDefault(),u=0,p=a.value,d=[t.clientX,t.clientY],document.addEventListener("mousemove",o,!1),document.addEventListener("mouseup",n,!1)}function o(t){var e=a.value;h=[t.clientX,t.clientY],u+=h[0]-d[0]-(h[1]-d[1]);var o=p+u/(t.shiftKey?5:50)*a.step;o=Math.min(a.max,Math.max(a.min,o)),e!==o&&(a.setValue(o),l.dispatchEvent(c)),d=[t.clientX,t.clientY]}function n(t){document.removeEventListener("mousemove",o,!1),document.removeEventListener("mouseup",n,!1),Math.abs(u)<2&&(l.focus(),l.select())}function r(t){a.setValue(l.value)}function i(t){l.style.backgroundColor="",l.style.cursor=""}function s(t){l.style.backgroundColor="transparent",l.style.cursor="col-resize"}UI.Element.call(this);var a=this,l=document.createElement("input");l.className="Number",l.value="0.00",l.addEventListener("keydown",function(t){t.stopPropagation(),13===t.keyCode&&l.blur()},!1),this.value=0,this.min=-(1/0),this.max=1/0,this.precision=2,this.step=1,this.unit="",this.dom=l,this.setValue(t);var c=document.createEvent("HTMLEvents");c.initEvent("change",!0,!0);var u=0,p=0,h=[0,0],d=[0,0];return s(),l.addEventListener("mousedown",e,!1),l.addEventListener("change",r,!1),l.addEventListener("focus",i,!1),l.addEventListener("blur",s,!1),this},UI.Number.prototype=Object.create(UI.Element.prototype),UI.Number.prototype.constructor=UI.Number,UI.Number.prototype.getValue=function(){return this.value},UI.Number.prototype.setValue=function(t){return void 0!==t&&(t=parseFloat(t),t<this.min&&(t=this.min),t>this.max&&(t=this.max),this.value=t,this.dom.value=t.toFixed(this.precision),""!==this.unit&&(this.dom.value+=" "+this.unit)),this},UI.Number.prototype.setPrecision=function(t){return this.precision=t,this},UI.Number.prototype.setStep=function(t){return this.step=t,this},UI.Number.prototype.setRange=function(t,e){return this.min=t,this.max=e,this},UI.Number.prototype.setUnit=function(t){return this.unit=t,this},UI.Integer=function(t){function e(t){t.preventDefault(),u=0,p=a.value,d=[t.clientX,t.clientY],document.addEventListener("mousemove",o,!1),document.addEventListener("mouseup",n,!1)}function o(t){var e=a.value;h=[t.clientX,t.clientY],u+=h[0]-d[0]-(h[1]-d[1]);var o=p+u/(t.shiftKey?5:50)*a.step;o=0|Math.min(a.max,Math.max(a.min,o)),e!==o&&(a.setValue(o),l.dispatchEvent(c)),d=[t.clientX,t.clientY]}function n(t){document.removeEventListener("mousemove",o,!1),document.removeEventListener("mouseup",n,!1),Math.abs(u)<2&&(l.focus(),l.select())}function r(t){a.setValue(l.value)}function i(t){l.style.backgroundColor="",l.style.cursor=""}function s(t){l.style.backgroundColor="transparent",l.style.cursor="col-resize"}UI.Element.call(this);var a=this,l=document.createElement("input");l.className="Number",l.value="0",l.addEventListener("keydown",function(t){t.stopPropagation()},!1),this.value=0,this.min=-(1/0),this.max=1/0,this.step=1,this.dom=l,this.setValue(t);var c=document.createEvent("HTMLEvents");c.initEvent("change",!0,!0);var u=0,p=0,h=[0,0],d=[0,0];return s(),l.addEventListener("mousedown",e,!1),l.addEventListener("change",r,!1),l.addEventListener("focus",i,!1),l.addEventListener("blur",s,!1),this},UI.Integer.prototype=Object.create(UI.Element.prototype),UI.Integer.prototype.constructor=UI.Integer,UI.Integer.prototype.getValue=function(){return this.value},UI.Integer.prototype.setValue=function(t){return void 0!==t&&(t=parseInt(t),this.value=t,this.dom.value=t),this},UI.Number.prototype.setStep=function(t){return this.step=t,this},UI.Integer.prototype.setRange=function(t,e){return this.min=t,this.max=e,this},UI.Break=function(){UI.Element.call(this);var t=document.createElement("br");return t.className="Break",this.dom=t,this},UI.Break.prototype=Object.create(UI.Element.prototype),UI.Break.prototype.constructor=UI.Break,UI.HorizontalRule=function(){UI.Element.call(this);var t=document.createElement("hr");return t.className="HorizontalRule",this.dom=t,this},UI.HorizontalRule.prototype=Object.create(UI.Element.prototype),UI.HorizontalRule.prototype.constructor=UI.HorizontalRule,UI.Button=function(t){UI.Element.call(this);var e=document.createElement("button");return e.className="Button",this.dom=e,this.dom.textContent=t,this},UI.Button.prototype=Object.create(UI.Element.prototype),UI.Button.prototype.constructor=UI.Button,UI.Button.prototype.setLabel=function(t){return this.dom.textContent=t,this},UI.Modal=function(t){var e=this,o=document.createElement("div");return o.style.position="absolute",o.style.width="100%",o.style.height="100%",o.style.backgroundColor="rgba(0,0,0,0.5)",o.style.display="none",o.style.alignItems="center",o.style.justifyContent="center",o.addEventListener("click",function(t){e.hide()}),this.dom=o,this.container=new UI.Panel,this.container.dom.style.width="200px",this.container.dom.style.padding="20px",this.container.dom.style.backgroundColor="#ffffff",this.container.dom.style.boxShadow="0px 5px 10px rgba(0,0,0,0.5)",this.add(this.container),this},UI.Modal.prototype=Object.create(UI.Element.prototype),UI.Modal.prototype.constructor=UI.Modal,UI.Modal.prototype.show=function(t){return this.container.clear(),this.container.add(t),this.dom.style.display="flex",this},UI.Modal.prototype.hide=function(){return this.dom.style.display="none",this};