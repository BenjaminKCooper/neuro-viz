Sidebar.Material=function(e){function a(){var a=d,t=a.geometry,l=a.material,i=!1,s=!1;if(a instanceof THREE.Sprite&&(s=!0),t instanceof THREE.Geometry&&t.faceVertexUvs[0].length>0&&(s=!0),t instanceof THREE.BufferGeometry&&void 0!==t.attributes.uv&&(s=!0),l){if(void 0!==l.uuid&&l.uuid!==h.getValue()&&e.execute(new SetMaterialValueCommand(d,"uuid",h.getValue())),l instanceof THREE[u.getValue()]==!1&&(l=new(THREE[u.getValue()]),e.execute(new SetMaterialCommand(d,l),"New Material: "+u.getValue())),void 0!==l.color&&l.color.getHex()!==C.getHexValue()&&e.execute(new SetMaterialColorCommand(d,"color",C.getHexValue())),void 0!==l.roughness&&Math.abs(l.roughness-U.getValue())>=.01&&e.execute(new SetMaterialValueCommand(d,"roughness",U.getValue())),void 0!==l.metalness&&Math.abs(l.metalness-f.getValue())>=.01&&e.execute(new SetMaterialValueCommand(d,"metalness",f.getValue())),void 0!==l.emissive&&l.emissive.getHex()!==b.getHexValue()&&e.execute(new SetMaterialColorCommand(d,"emissive",b.getHexValue())),void 0!==l.specular&&l.specular.getHex()!==W.getHexValue()&&e.execute(new SetMaterialColorCommand(d,"specular",W.getHexValue())),void 0!==l.shininess&&Math.abs(l.shininess-y.getValue())>=.01&&e.execute(new SetMaterialValueCommand(d,"shininess",y.getValue())),void 0!==l.clearCoat&&Math.abs(l.clearCoat-N.getValue())>=.01&&e.execute(new SetMaterialValueCommand(d,"clearCoat",N.getValue())),void 0!==l.clearCoatRoughness&&Math.abs(l.clearCoatRoughness-L.getValue())>=.01&&e.execute(new SetMaterialValueCommand(d,"clearCoatRoughness",L.getValue())),void 0!==l.vertexColors){var o=parseInt(D.getValue());l.vertexColors!==o&&e.execute(new SetMaterialValueCommand(d,"vertexColors",o))}if(void 0!==l.skinning&&l.skinning!==P.getValue()&&e.execute(new SetMaterialValueCommand(d,"skinning",P.getValue())),void 0!==l.map){var r=z.getValue()===!0;if(s){var p=r?A.getValue():null;l.map!==p&&e.execute(new SetMaterialMapCommand(d,"map",p))}else r&&(i=!0)}if(void 0!==l.alphaMap){var r=j.getValue()===!0;if(s){var w=r?q.getValue():null;l.alphaMap!==w&&e.execute(new SetMaterialMapCommand(d,"alphaMap",w))}else r&&(i=!0)}if(void 0!==l.bumpMap){var M=K.getValue()===!0;if(s){var g=M?Q.getValue():null;l.bumpMap!==g&&e.execute(new SetMaterialMapCommand(d,"bumpMap",g)),l.bumpScale!==X.getValue()&&e.execute(new SetMaterialValueCommand(d,"bumpScale",X.getValue()))}else M&&(i=!0)}if(void 0!==l.normalMap){var m=Z.getValue()===!0;if(s){var x=m?$.getValue():null;l.normalMap!==x&&e.execute(new SetMaterialMapCommand(d,"normalMap",x))}else m&&(i=!0)}if(void 0!==l.displacementMap){var v=ee.getValue()===!0;if(s){var c=v?ae.getValue():null;l.displacementMap!==c&&e.execute(new SetMaterialMapCommand(d,"displacementMap",c)),l.displacementScale!==te.getValue()&&e.execute(new SetMaterialValueCommand(d,"displacementScale",te.getValue()))}else v&&(i=!0)}if(void 0!==l.roughnessMap){var V=de.getValue()===!0;if(s){var I=V?le.getValue():null;l.roughnessMap!==I&&e.execute(new SetMaterialMapCommand(d,"roughnessMap",I))}else V&&(i=!0)}if(void 0!==l.metalnessMap){var S=se.getValue()===!0;if(s){var T=S?oe.getValue():null;l.metalnessMap!==T&&e.execute(new SetMaterialMapCommand(d,"metalnessMap",T))}else S&&(i=!0)}if(void 0!==l.specularMap){var R=ue.getValue()===!0;if(s){var k=R?pe.getValue():null;l.specularMap!==k&&e.execute(new SetMaterialMapCommand(d,"specularMap",k))}else R&&(i=!0)}if(void 0!==l.envMap){var H=we.getValue()===!0,E=H?Me.getValue():null;l.envMap!==E&&e.execute(new SetMaterialMapCommand(d,"envMap",E))}if(void 0!==l.reflectivity){var B=ge.getValue();l.reflectivity!==B&&e.execute(new SetMaterialValueCommand(d,"reflectivity",B))}if(void 0!==l.lightMap){var F=xe.getValue()===!0;if(s){var O=F?ve.getValue():null;l.lightMap!==O&&e.execute(new SetMaterialMapCommand(d,"lightMap",O))}else F&&(i=!0)}if(void 0!==l.aoMap){var G=Ve.getValue()===!0;if(s){var J=G?Ce.getValue():null;l.aoMap!==J&&e.execute(new SetMaterialMapCommand(d,"aoMap",J)),l.aoMapIntensity!==Ie.getValue()&&e.execute(new SetMaterialValueCommand(d,"aoMapIntensity",Ie.getValue()))}else G&&(i=!0)}if(void 0!==l.emissiveMap){var Y=Se.getValue()===!0;if(s){var _=Y?fe.getValue():null;l.emissiveMap!==_&&e.execute(new SetMaterialMapCommand(d,"emissiveMap",_))}else Y&&(i=!0)}if(void 0!==l.side){var ne=parseInt(be.getValue());l.side!==ne&&e.execute(new SetMaterialValueCommand(d,"side",ne))}if(void 0!==l.shading){var ie=parseInt(We.getValue());l.shading!==ie&&e.execute(new SetMaterialValueCommand(d,"shading",ie))}if(void 0!==l.blending){var re=parseInt(ye.getValue());l.blending!==re&&e.execute(new SetMaterialValueCommand(d,"blending",re))}void 0!==l.opacity&&Math.abs(l.opacity-Ne.getValue())>=.01&&e.execute(new SetMaterialValueCommand(d,"opacity",Ne.getValue())),void 0!==l.transparent&&l.transparent!==Le.getValue()&&e.execute(new SetMaterialValueCommand(d,"transparent",Le.getValue())),void 0!==l.alphaTest&&Math.abs(l.alphaTest-De.getValue())>=.01&&e.execute(new SetMaterialValueCommand(d,"alphaTest",De.getValue())),void 0!==l.wireframe&&l.wireframe!==Pe.getValue()&&e.execute(new SetMaterialValueCommand(d,"wireframe",Pe.getValue())),void 0!==l.wireframeLinewidth&&Math.abs(l.wireframeLinewidth-Oe.getValue())>=.01&&e.execute(new SetMaterialValueCommand(d,"wireframeLinewidth",Oe.getValue())),n()}i&&console.warn("Can't set texture, model doesn't have texture coordinates")}function t(){var e={name:M,color:V,roughness:I,metalness:S,emissive:T,specular:R,shininess:k,clearCoat:H,clearCoatRoughness:E,vertexShader:m,vertexColors:B,skinning:F,map:O,alphaMap:G,bumpMap:J,normalMap:Y,displacementMap:_,roughnessMap:ne,metalnessMap:ie,specularMap:re,envMap:he,lightMap:me,aoMap:ce,emissiveMap:Ue,side:Te,shading:Re,blending:ke,opacity:He,transparent:Ee,alphaTest:Be,wireframe:Fe},a=d.material;for(var t in e)e[t].setDisplay(void 0!==a[t]?"":"none")}function n(e){if(d){var a=d.material;void 0!==a.uuid&&h.setValue(a.uuid),void 0!==a.name&&g.setValue(a.name),u.setValue(a.type),void 0!==a.color&&C.setHexValue(a.color.getHexString()),void 0!==a.roughness&&U.setValue(a.roughness),void 0!==a.metalness&&f.setValue(a.metalness),void 0!==a.emissive&&b.setHexValue(a.emissive.getHexString()),void 0!==a.specular&&W.setHexValue(a.specular.getHexString()),void 0!==a.shininess&&y.setValue(a.shininess),void 0!==a.clearCoat&&N.setValue(a.clearCoat),void 0!==a.clearCoatRoughness&&L.setValue(a.clearCoatRoughness),void 0!==a.vertexColors&&D.setValue(a.vertexColors),void 0!==a.skinning&&P.setValue(a.skinning),void 0!==a.map&&(z.setValue(null!==a.map),(null!==a.map||e)&&A.setValue(a.map)),void 0!==a.alphaMap&&(j.setValue(null!==a.alphaMap),(null!==a.alphaMap||e)&&q.setValue(a.alphaMap)),void 0!==a.bumpMap&&(K.setValue(null!==a.bumpMap),(null!==a.bumpMap||e)&&Q.setValue(a.bumpMap),X.setValue(a.bumpScale)),void 0!==a.normalMap&&(Z.setValue(null!==a.normalMap),(null!==a.normalMap||e)&&$.setValue(a.normalMap)),void 0!==a.displacementMap&&(ee.setValue(null!==a.displacementMap),(null!==a.displacementMap||e)&&ae.setValue(a.displacementMap),te.setValue(a.displacementScale)),void 0!==a.roughnessMap&&(de.setValue(null!==a.roughnessMap),(null!==a.roughnessMap||e)&&le.setValue(a.roughnessMap)),void 0!==a.metalnessMap&&(se.setValue(null!==a.metalnessMap),(null!==a.metalnessMap||e)&&oe.setValue(a.metalnessMap)),void 0!==a.specularMap&&(ue.setValue(null!==a.specularMap),(null!==a.specularMap||e)&&pe.setValue(a.specularMap)),void 0!==a.envMap&&(we.setValue(null!==a.envMap),(null!==a.envMap||e)&&Me.setValue(a.envMap)),void 0!==a.reflectivity&&ge.setValue(a.reflectivity),void 0!==a.lightMap&&(xe.setValue(null!==a.lightMap),(null!==a.lightMap||e)&&ve.setValue(a.lightMap)),void 0!==a.aoMap&&(Ve.setValue(null!==a.aoMap),(null!==a.aoMap||e)&&Ce.setValue(a.aoMap),Ie.setValue(a.aoMapIntensity)),void 0!==a.emissiveMap&&(Se.setValue(null!==a.emissiveMap),(null!==a.emissiveMap||e)&&fe.setValue(a.emissiveMap)),void 0!==a.side&&be.setValue(a.side),void 0!==a.shading&&We.setValue(a.shading),void 0!==a.blending&&ye.setValue(a.blending),void 0!==a.opacity&&Ne.setValue(a.opacity),void 0!==a.transparent&&Le.setValue(a.transparent),void 0!==a.alphaTest&&De.setValue(a.alphaTest),void 0!==a.wireframe&&Pe.setValue(a.wireframe),void 0!==a.wireframeLinewidth&&Oe.setValue(a.wireframeLinewidth),t()}}var d,l=e.signals,i=new UI.Panel;i.setBorderTop("0"),i.setPaddingTop("20px");var s,o=new UI.Row;o.add(new UI.Text("").setWidth("90px")),o.add(new UI.Button("New").onClick(function(){var t=new(THREE[u.getValue()]);e.execute(new SetMaterialCommand(d,t),"New Material: "+u.getValue()),a()})),o.add(new UI.Button("Copy").setMarginLeft("4px").onClick(function(){s=d.material})),o.add(new UI.Button("Paste").setMarginLeft("4px").onClick(function(){void 0!==s&&(e.execute(new SetMaterialCommand(d,s),"Pasted Material: "+u.getValue()),n(),a())})),i.add(o);var r=new UI.Row,u=(new UI.Select).setOptions({LineBasicMaterial:"LineBasicMaterial",LineDashedMaterial:"LineDashedMaterial",MeshBasicMaterial:"MeshBasicMaterial",MeshDepthMaterial:"MeshDepthMaterial",MeshNormalMaterial:"MeshNormalMaterial",MeshLambertMaterial:"MeshLambertMaterial",MeshPhongMaterial:"MeshPhongMaterial",MeshStandardMaterial:"MeshStandardMaterial",MeshPhysicalMaterial:"MeshPhysicalMaterial",ShaderMaterial:"ShaderMaterial",SpriteMaterial:"SpriteMaterial"}).setWidth("150px").setFontSize("12px").onChange(a);r.add(new UI.Text("Type").setWidth("90px")),r.add(u),i.add(r);var p=new UI.Row,h=(new UI.Input).setWidth("102px").setFontSize("12px").setDisabled(!0),w=new UI.Button("New").setMarginLeft("7px").onClick(function(){h.setValue(THREE.Math.generateUUID()),a()});p.add(new UI.Text("UUID").setWidth("90px")),p.add(h),p.add(w),i.add(p);var M=new UI.Row,g=(new UI.Input).setWidth("150px").setFontSize("12px").onChange(function(){e.execute(new SetMaterialValueCommand(e.selected,"name",g.getValue()))});M.add(new UI.Text("Name").setWidth("90px")),M.add(g),i.add(M);var m=new UI.Row;m.add(new UI.Text("Program").setWidth("90px"));var x=new UI.Button("Info");x.setMarginLeft("4px"),x.onClick(function(){l.editScript.dispatch(d,"programInfo")}),m.add(x);var v=new UI.Button("Vertex");v.setMarginLeft("4px"),v.onClick(function(){l.editScript.dispatch(d,"vertexShader")}),m.add(v);var c=new UI.Button("Fragment");c.setMarginLeft("4px"),c.onClick(function(){l.editScript.dispatch(d,"fragmentShader")}),m.add(c),i.add(m);var V=new UI.Row,C=(new UI.Color).onChange(a);V.add(new UI.Text("Color").setWidth("90px")),V.add(C),i.add(V);var I=new UI.Row,U=new UI.Number(.5).setWidth("60px").setRange(0,1).onChange(a);I.add(new UI.Text("Roughness").setWidth("90px")),I.add(U),i.add(I);var S=new UI.Row,f=new UI.Number(.5).setWidth("60px").setRange(0,1).onChange(a);S.add(new UI.Text("Metalness").setWidth("90px")),S.add(f),i.add(S);var T=new UI.Row,b=(new UI.Color).setHexValue(0).onChange(a);T.add(new UI.Text("Emissive").setWidth("90px")),T.add(b),i.add(T);var R=new UI.Row,W=(new UI.Color).setHexValue(1118481).onChange(a);R.add(new UI.Text("Specular").setWidth("90px")),R.add(W),i.add(R);var k=new UI.Row,y=new UI.Number(30).onChange(a);k.add(new UI.Text("Shininess").setWidth("90px")),k.add(y),i.add(k);var H=new UI.Row,N=new UI.Number(1).setWidth("60px").setRange(0,1).onChange(a);H.add(new UI.Text("ClearCoat").setWidth("90px")),H.add(N),i.add(H);var E=new UI.Row,L=new UI.Number(1).setWidth("60px").setRange(0,1).onChange(a);E.add(new UI.Text("ClearCoat Roughness").setWidth("90px")),E.add(L),i.add(E);var B=new UI.Row,D=(new UI.Select).setOptions({0:"No",1:"Face",2:"Vertex"}).onChange(a);B.add(new UI.Text("Vertex Colors").setWidth("90px")),B.add(D),i.add(B);var F=new UI.Row,P=new UI.Checkbox(!1).onChange(a);F.add(new UI.Text("Skinning").setWidth("90px")),F.add(P),i.add(F);var O=new UI.Row,z=new UI.Checkbox(!1).onChange(a),A=(new UI.Texture).onChange(a);O.add(new UI.Text("Map").setWidth("90px")),O.add(z),O.add(A),i.add(O);var G=new UI.Row,j=new UI.Checkbox(!1).onChange(a),q=(new UI.Texture).onChange(a);G.add(new UI.Text("Alpha Map").setWidth("90px")),G.add(j),G.add(q),i.add(G);var J=new UI.Row,K=new UI.Checkbox(!1).onChange(a),Q=(new UI.Texture).onChange(a),X=new UI.Number(1).setWidth("30px").onChange(a);J.add(new UI.Text("Bump Map").setWidth("90px")),J.add(K),J.add(Q),J.add(X),i.add(J);var Y=new UI.Row,Z=new UI.Checkbox(!1).onChange(a),$=(new UI.Texture).onChange(a);Y.add(new UI.Text("Normal Map").setWidth("90px")),Y.add(Z),Y.add($),i.add(Y);var _=new UI.Row,ee=new UI.Checkbox(!1).onChange(a),ae=(new UI.Texture).onChange(a),te=new UI.Number(1).setWidth("30px").onChange(a);_.add(new UI.Text("Displace Map").setWidth("90px")),_.add(ee),_.add(ae),_.add(te),i.add(_);var ne=new UI.Row,de=new UI.Checkbox(!1).onChange(a),le=(new UI.Texture).onChange(a);ne.add(new UI.Text("Rough. Map").setWidth("90px")),ne.add(de),ne.add(le),i.add(ne);var ie=new UI.Row,se=new UI.Checkbox(!1).onChange(a),oe=(new UI.Texture).onChange(a);ie.add(new UI.Text("Metal. Map").setWidth("90px")),ie.add(se),ie.add(oe),i.add(ie);var re=new UI.Row,ue=new UI.Checkbox(!1).onChange(a),pe=(new UI.Texture).onChange(a);re.add(new UI.Text("Specular Map").setWidth("90px")),re.add(ue),re.add(pe),i.add(re);var he=new UI.Row,we=new UI.Checkbox(!1).onChange(a),Me=new UI.Texture(THREE.SphericalReflectionMapping).onChange(a),ge=new UI.Number(1).setWidth("30px").onChange(a);he.add(new UI.Text("Env Map").setWidth("90px")),he.add(we),he.add(Me),he.add(ge),i.add(he);var me=new UI.Row,xe=new UI.Checkbox(!1).onChange(a),ve=(new UI.Texture).onChange(a);me.add(new UI.Text("Light Map").setWidth("90px")),me.add(xe),me.add(ve),i.add(me);var ce=new UI.Row,Ve=new UI.Checkbox(!1).onChange(a),Ce=(new UI.Texture).onChange(a),Ie=new UI.Number(1).setRange(0,1).setWidth("30px").onChange(a);ce.add(new UI.Text("AO Map").setWidth("90px")),ce.add(Ve),ce.add(Ce),ce.add(Ie),i.add(ce);var Ue=new UI.Row,Se=new UI.Checkbox(!1).onChange(a),fe=(new UI.Texture).onChange(a);Ue.add(new UI.Text("Emissive Map").setWidth("90px")),Ue.add(Se),Ue.add(fe),i.add(Ue);var Te=new UI.Row,be=(new UI.Select).setOptions({0:"Front",1:"Back",2:"Double"}).setWidth("150px").setFontSize("12px").onChange(a);Te.add(new UI.Text("Side").setWidth("90px")),Te.add(be),i.add(Te);var Re=new UI.Row,We=(new UI.Select).setOptions({0:"No",1:"Flat",2:"Smooth"}).setWidth("150px").setFontSize("12px").onChange(a);Re.add(new UI.Text("Shading").setWidth("90px")),Re.add(We),i.add(Re);var ke=new UI.Row,ye=(new UI.Select).setOptions({0:"No",1:"Normal",2:"Additive",3:"Subtractive",4:"Multiply",5:"Custom"}).setWidth("150px").setFontSize("12px").onChange(a);ke.add(new UI.Text("Blending").setWidth("90px")),ke.add(ye),i.add(ke);var He=new UI.Row,Ne=new UI.Number(1).setWidth("60px").setRange(0,1).onChange(a);He.add(new UI.Text("Opacity").setWidth("90px")),He.add(Ne),i.add(He);var Ee=new UI.Row,Le=(new UI.Checkbox).setLeft("100px").onChange(a);Ee.add(new UI.Text("Transparent").setWidth("90px")),Ee.add(Le),i.add(Ee);var Be=new UI.Row,De=(new UI.Number).setWidth("60px").setRange(0,1).onChange(a);Be.add(new UI.Text("Alpha Test").setWidth("90px")),Be.add(De),i.add(Be);var Fe=new UI.Row,Pe=new UI.Checkbox(!1).onChange(a),Oe=new UI.Number(1).setWidth("60px").setRange(0,100).onChange(a);return Fe.add(new UI.Text("Wireframe").setWidth("90px")),Fe.add(Pe),Fe.add(Oe),i.add(Fe),l.objectSelected.add(function(e){if(e&&e.material){var a=e!==d;d=e,n(a),i.setDisplay("")}else d=null,i.setDisplay("none")}),l.materialChanged.add(function(){n()}),i};