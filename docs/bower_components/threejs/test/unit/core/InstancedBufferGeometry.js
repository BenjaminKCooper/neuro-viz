function createClonableMock(){return{callCount:0,clone:function(){return this.callCount++,this}}}module("InstancedBufferGeometry"),test("copy",function(){var t={},e={},o=createClonableMock(),r=new THREE.BufferAttribute([1]),a=new THREE.BufferAttribute([2]),u=new THREE.InstancedBufferGeometry;u.addGroup(0,10,t),u.addGroup(10,5,e),u.setIndex(o),u.addAttribute("defaultAttribute1",r),u.addAttribute("defaultAttribute2",a);var n=u.copy(u);ok(n instanceof THREE.InstancedBufferGeometry,"the clone has the correct type"),ok(n.index===o,"index was copied"),ok(1===n.index.callCount,"index.clone was called once"),ok(n.attributes.defaultAttribute1 instanceof THREE.BufferAttribute,"attribute was created"),ok(n.attributes.defaultAttribute1.array[0]===r.array,"attribute was copied"),ok(n.attributes.defaultAttribute2.array[0]===a.array,"attribute was copied"),ok(0===n.groups[0].start,"group was copied"),ok(10===n.groups[0].count,"group was copied"),ok(n.groups[0].instances===t,"group was copied"),ok(10===n.groups[1].start,"group was copied"),ok(5===n.groups[1].count,"group was copied"),ok(n.groups[1].instances===e,"group was copied")});