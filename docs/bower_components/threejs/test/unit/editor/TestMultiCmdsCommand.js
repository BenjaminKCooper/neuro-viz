module("MultiCmdsCommand"),test("Test MultiCmdsCommand (Undo and Redo)",function(){var e=new Editor,t=aBox("Multi Command Box"),o={geometry:{parameters:{width:200,height:201,depth:202,widthSegments:2,heightSegments:3,depthSegments:4}}},a={geometry:{parameters:{width:50,height:51,depth:52,widthSegments:7,heightSegments:8,depthSegments:9}}},n=[getGeometry("BoxGeometry",o),getGeometry("BoxGeometry",a)],i=new AddObjectCommand(t);i.updatable=!1,e.execute(i);var d=[new SetGeometryCommand(t,n[0]),new SetPositionCommand(t,new THREE.Vector3(1,2,3)),new SetRotationCommand(t,new THREE.Euler(.1,.2,.2)),new SetScaleCommand(t,new THREE.Vector3(1.1,1.2,1.3))];d.map(function(e){e.updatable=!1});var m=new MultiCmdsCommand(d);m.updatable=!1,e.execute(m);var c=[new SetGeometryCommand(t,n[1]),new SetPositionCommand(t,new THREE.Vector3(4,5,6)),new SetRotationCommand(t,new THREE.Euler(.4,.5,.6)),new SetScaleCommand(t,new THREE.Vector3(1.4,1.5,1.6))];c.map(function(e){e.updatable=!1});var r=new MultiCmdsCommand(c);r.updatable=!1,e.execute(r),ok(7==t.geometry.parameters.widthSegments,"OK, widthSegments has been modified accordingly after two multi executes (expected: 7, actual: "+t.geometry.parameters.widthSegments+")"),ok(5==t.position.y,"OK, y position has been modified accordingly after two multi executes (expected: 5, actual: "+t.position.y+")"),ok(.4==t.rotation.x,"OK, x rotation has been modified accordingly after two multi executes (expected: 0.4, actual: "+t.rotation.x+") "),ok(1.6==t.scale.z,"OK, z scale has been modified accordingly after two multi executes (expected: 1.6, actual: "+t.scale.z+")"),e.undo(),ok(2==t.geometry.parameters.widthSegments,"OK, widthSegments has been modified accordingly after undo (expected: 2, actual: "+t.geometry.parameters.widthSegments+")"),ok(2==t.position.y,"OK, y position has been modified accordingly after undo (expected: 2, actual: "+t.position.y+")"),ok(.1==t.rotation.x,"OK, x rotation has been modified accordingly after undo (expected: 0.1, actual: "+t.rotation.x+")"),ok(1.3==t.scale.z,"OK, z scale has been modified accordingly after undo (expected: 1.3, actual: "+t.scale.z+")"),e.redo(),ok(7==t.geometry.parameters.widthSegments,"OK, widthSegments has been modified accordingly after two multi executes (expected: 7, actual: "+t.geometry.parameters.widthSegments+")"),ok(5==t.position.y,"OK, y position has been modified accordingly after two multi executes (expected: 5, actual: "+t.position.y+")"),ok(.4==t.rotation.x,"OK, x rotation has been modified accordingly after two multi executes (expected: 0.4, actual: "+t.rotation.x+") "),ok(1.6==t.scale.z,"OK, z scale has been modified accordingly after two multi executes (expected: 1.6, actual: "+t.scale.z+")")});