THREE.DragControls=function(e,t,n){function o(){n.addEventListener("mousemove",a,!1),n.addEventListener("mousedown",i,!1),n.addEventListener("mouseup",c,!1)}function r(){n.removeEventListener("mousemove",a,!1),n.removeEventListener("mousedown",i,!1),n.removeEventListener("mouseup",c,!1)}function s(){r()}function a(o){if(o.preventDefault(),v.x=o.clientX/n.width*2-1,v.y=2*-(o.clientY/n.height)+1,d.setFromCamera(v,t),h&&f.enabled)return d.ray.intersectPlane(l,p)&&h.position.copy(p.sub(u)),void f.dispatchEvent({type:"drag",object:h});d.setFromCamera(v,t);var r=d.intersectObjects(e);if(r.length>0){var s=r[0].object;l.setFromNormalAndCoplanarPoint(t.getWorldDirection(l.normal),s.position),m!==s&&(f.dispatchEvent({type:"hoveron",object:s}),n.style.cursor="pointer",m=s)}else null!==m&&(f.dispatchEvent({type:"hoveroff",object:m}),n.style.cursor="auto",m=null)}function i(o){o.preventDefault(),d.setFromCamera(v,t);var r=d.intersectObjects(e);r.length>0&&(h=r[0].object,d.ray.intersectPlane(l,p)&&u.copy(p).sub(h.position),n.style.cursor="move",f.dispatchEvent({type:"dragstart",object:h}))}function c(e){e.preventDefault(),h&&(f.dispatchEvent({type:"dragend",object:h}),h=null),n.style.cursor="auto"}if(e instanceof THREE.Camera){console.warn("THREE.DragControls: Constructor now expects ( objects, camera, domElement )");var E=e;e=t,t=E}var l=new THREE.Plane,d=new THREE.Raycaster,v=new THREE.Vector2,u=new THREE.Vector3,p=new THREE.Vector3,h=null,m=null,f=this;o(),this.enabled=!0,this.activate=o,this.deactivate=r,this.dispose=s,this.setObjects=function(){console.error("THREE.DragControls: setObjects() has been removed.")},this.on=function(e,t){console.warn("THREE.DragControls: on() has been deprecated. Use addEventListener() instead."),f.addEventListener(e,t)},this.off=function(e,t){console.warn("THREE.DragControls: off() has been deprecated. Use removeEventListener() instead."),f.removeEventListener(e,t)},this.notify=function(e){console.error("THREE.DragControls: notify() has been deprecated. Use dispatchEvent() instead."),f.dispatchEvent({type:e})}},THREE.DragControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.DragControls.prototype.constructor=THREE.DragControls;