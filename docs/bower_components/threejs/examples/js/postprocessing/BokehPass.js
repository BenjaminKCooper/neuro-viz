THREE.BokehPass=function(e,r,t){THREE.Pass.call(this),this.scene=e,this.camera=r;var a=void 0!==t.focus?t.focus:1,i=void 0!==t.aspect?t.aspect:r.aspect,s=void 0!==t.aperture?t.aperture:.025,h=void 0!==t.maxblur?t.maxblur:1,n=t.width||window.innerWidth||1,o=t.height||window.innerHeight||1;this.renderTargetColor=new THREE.WebGLRenderTarget(n,o,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat}),this.renderTargetDepth=this.renderTargetColor.clone(),this.materialDepth=new THREE.MeshDepthMaterial,void 0===THREE.BokehShader&&console.error("THREE.BokehPass relies on THREE.BokehShader");var E=THREE.BokehShader,l=THREE.UniformsUtils.clone(E.uniforms);l.tDepth.value=this.renderTargetDepth.texture,l.focus.value=a,l.aspect.value=i,l.aperture.value=s,l.maxblur.value=h,this.materialBokeh=new THREE.ShaderMaterial({uniforms:l,vertexShader:E.vertexShader,fragmentShader:E.fragmentShader}),this.uniforms=l,this.needsSwap=!1,this.camera2=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene2=new THREE.Scene,this.quad2=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.scene2.add(this.quad2)},THREE.BokehPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.BokehPass,render:function(e,r,t,a,i){this.quad2.material=this.materialBokeh,this.scene.overrideMaterial=this.materialDepth,e.render(this.scene,this.camera,this.renderTargetDepth,!0),this.uniforms.tColor.value=t.texture,this.renderToScreen?e.render(this.scene2,this.camera2):e.render(this.scene2,this.camera2,r,this.clear),this.scene.overrideMaterial=null}});