THREE.ShadowMapViewer=function(e){function i(){n.position.set(n.position.x,n.position.y)}var t,n=this,h=void 0!==e.name&&""!==e.name,o={x:10,y:10,width:256,height:256},r=new THREE.OrthographicCamera(window.innerWidth/-2,window.innerWidth/2,window.innerHeight/2,window.innerHeight/-2,1,10);r.position.set(0,0,2);var a=new THREE.Scene,s=THREE.UnpackDepthRGBAShader,d=new THREE.UniformsUtils.clone(s.uniforms),w=new THREE.ShaderMaterial({uniforms:d,vertexShader:s.vertexShader,fragmentShader:s.fragmentShader}),E=new THREE.PlaneBufferGeometry(o.width,o.height),l=new THREE.Mesh(E,w);a.add(l);var p,g;if(h){p=document.createElement("canvas");var u=p.getContext("2d");u.font="Bold 20px Arial";var f=u.measureText(e.name).width;p.width=f,p.height=25,u.font="Bold 20px Arial",u.fillStyle="rgba( 255, 0, 0, 1 )",u.fillText(e.name,0,20);var H=new THREE.Texture(p);H.magFilter=THREE.LinearFilter,H.minFilter=THREE.LinearFilter,H.needsUpdate=!0;var m=new THREE.MeshBasicMaterial({map:H,side:THREE.DoubleSide});m.transparent=!0;var T=new THREE.PlaneBufferGeometry(p.width,p.height);g=new THREE.Mesh(T,m),a.add(g)}this.enabled=!0,this.size={width:o.width,height:o.height,set:function(e,t){this.width=e,this.height=t,l.scale.set(this.width/o.width,this.height/o.height,1),i()}},this.position={x:o.x,y:o.y,set:function(e,i){this.x=e,this.y=i;var t=n.size.width,o=n.size.height;l.position.set(-window.innerWidth/2+t/2+this.x,window.innerHeight/2-o/2-this.y,0),h&&g.position.set(l.position.x,l.position.y-n.size.height/2+p.height/2,0)}},this.render=function(i){this.enabled&&(d.tDiffuse.value=e.shadow.map.texture,t=i.autoClear,i.autoClear=!1,i.clearDepth(),i.render(a,r),i.autoClear=t)},this.updateForWindowResize=function(){this.enabled&&(r.left=window.innerWidth/-2,r.right=window.innerWidth/2,r.top=window.innerHeight/2,r.bottom=window.innerHeight/-2)},this.update=function(){this.position.set(this.position.x,this.position.y),this.size.set(this.size.width,this.size.height)},this.update()},THREE.ShadowMapViewer.prototype.constructor=THREE.ShadowMapViewer;