THREE.BinaryLoader=function(r){"boolean"==typeof r&&(console.warn("THREE.BinaryLoader: showStatus parameter has been removed from constructor."),r=void 0),this.manager=void 0!==r?r:THREE.DefaultLoadingManager},THREE.BinaryLoader.prototype={constructor:THREE.BinaryLoader,load:function(r,n,t,e){var a=this.texturePath||THREE.Loader.prototype.extractUrlBase(r),E=this.binaryPath||THREE.Loader.prototype.extractUrlBase(r),o=this,i=new THREE.FileLoader(this.manager);i.load(r,function(r){var i=JSON.parse(r),_=E+i.buffers,u=new THREE.FileLoader(o.manager);u.setResponseType("arraybuffer"),u.load(_,function(r){o.parse(r,n,a,i.materials)},t,e)},t,e)},setBinaryPath:function(r){this.binaryPath=r},setCrossOrigin:function(r){this.crossOrigin=r},setTexturePath:function(r){this.texturePath=r},parse:function(r,n,t,e){var a=function(n){function t(r){return r%4?4-r%4:0}function e(r,n){var t={signature:a(r,n,12),header_bytes:E(r,n+12),vertex_coordinate_bytes:E(r,n+13),normal_coordinate_bytes:E(r,n+14),uv_coordinate_bytes:E(r,n+15),vertex_index_bytes:E(r,n+16),normal_index_bytes:E(r,n+17),uv_index_bytes:E(r,n+18),material_index_bytes:E(r,n+19),nvertices:o(r,n+20),nnormals:o(r,n+20+4),nuvs:o(r,n+20+8),ntri_flat:o(r,n+20+12),ntri_smooth:o(r,n+20+16),ntri_flat_uv:o(r,n+20+20),ntri_smooth_uv:o(r,n+20+24),nquad_flat:o(r,n+20+28),nquad_smooth:o(r,n+20+32),nquad_flat_uv:o(r,n+20+36),nquad_smooth_uv:o(r,n+20+40)};return t}function a(r,n,t){for(var e=new Uint8Array(r,n,t),a="",E=0;E<t;E++)a+=String.fromCharCode(e[n+E]);return a}function E(r,n){var t=new Uint8Array(r,n,1);return t[0]}function o(r,n){var t=new Uint32Array(r,n,1);return t[0]}function i(n){var t,e,a,E,o=U.nvertices,i=new Float32Array(r,n,3*o);for(t=0;t<o;t++)e=i[3*t],a=i[3*t+1],E=i[3*t+2],j.vertices.push(new THREE.Vector3(e,a,E));return 3*o*Float32Array.BYTES_PER_ELEMENT}function _(n){var t=U.nnormals;if(t){var e,a,E,o,i=new Int8Array(r,n,3*t);for(e=0;e<t;e++)a=i[3*e],E=i[3*e+1],o=i[3*e+2],J.push(a/127,E/127,o/127)}return 3*t*Int8Array.BYTES_PER_ELEMENT}function u(n){var t=U.nuvs;if(t){var e,a,E,o=new Float32Array(r,n,2*t);for(e=0;e<t;e++)a=o[2*e],E=o[2*e+1],k.push(a,E)}return 2*t*Float32Array.BYTES_PER_ELEMENT}function s(n,t){var e,a,E,o,i,_,u,s,c,f,y=new Uint32Array(r,t,3*n);for(e=0;e<n;e++)a=y[3*e],E=y[3*e+1],o=y[3*e+2],i=k[2*a],s=k[2*a+1],_=k[2*E],c=k[2*E+1],u=k[2*o],f=k[2*o+1],j.faceVertexUvs[0].push([new THREE.Vector2(i,s),new THREE.Vector2(_,c),new THREE.Vector2(u,f)])}function c(n,t){var e,a,E,o,i,_,u,s,c,f,y,T,v,l=new Uint32Array(r,t,4*n);for(e=0;e<n;e++)a=l[4*e],E=l[4*e+1],o=l[4*e+2],i=l[4*e+3],_=k[2*a],f=k[2*a+1],u=k[2*E],y=k[2*E+1],s=k[2*o],T=k[2*o+1],c=k[2*i],v=k[2*i+1],j.faceVertexUvs[0].push([new THREE.Vector2(_,f),new THREE.Vector2(u,y),new THREE.Vector2(c,v)]),j.faceVertexUvs[0].push([new THREE.Vector2(u,y),new THREE.Vector2(s,T),new THREE.Vector2(c,v)])}function f(n,t,e){var a,E,o,i,_,u=new Uint32Array(r,t,3*n),s=new Uint16Array(r,e,n);for(a=0;a<n;a++)E=u[3*a],o=u[3*a+1],i=u[3*a+2],_=s[a],j.faces.push(new THREE.Face3(E,o,i,null,null,_))}function y(n,t,e){var a,E,o,i,_,u,s=new Uint32Array(r,t,4*n),c=new Uint16Array(r,e,n);for(a=0;a<n;a++)E=s[4*a],o=s[4*a+1],i=s[4*a+2],_=s[4*a+3],u=c[a],j.faces.push(new THREE.Face3(E,o,_,null,null,u)),j.faces.push(new THREE.Face3(o,i,_,null,null,u))}function T(n,t,e,a){var E,o,i,_,u,s,c,f,y=new Uint32Array(r,t,3*n),T=new Uint32Array(r,e,3*n),v=new Uint16Array(r,a,n);for(E=0;E<n;E++){o=y[3*E],i=y[3*E+1],_=y[3*E+2],s=T[3*E],c=T[3*E+1],f=T[3*E+2],u=v[E];var l=J[3*s],R=J[3*s+1],d=J[3*s+2],h=J[3*c],w=J[3*c+1],m=J[3*c+2],A=J[3*f],H=J[3*f+1],U=J[3*f+2];j.faces.push(new THREE.Face3(o,i,_,[new THREE.Vector3(l,R,d),new THREE.Vector3(h,w,m),new THREE.Vector3(A,H,U)],null,u))}}function v(n,t,e,a){var E,o,i,_,u,s,c,f,y,T,v=new Uint32Array(r,t,4*n),l=new Uint32Array(r,e,4*n),R=new Uint16Array(r,a,n);for(E=0;E<n;E++){o=v[4*E],i=v[4*E+1],_=v[4*E+2],u=v[4*E+3],c=l[4*E],f=l[4*E+1],y=l[4*E+2],T=l[4*E+3],s=R[E];var d=J[3*c],h=J[3*c+1],w=J[3*c+2],m=J[3*f],A=J[3*f+1],H=J[3*f+2],U=J[3*y],p=J[3*y+1],L=J[3*y+2],b=J[3*T],x=J[3*T+1],B=J[3*T+2];j.faces.push(new THREE.Face3(o,i,u,[new THREE.Vector3(d,h,w),new THREE.Vector3(m,A,H),new THREE.Vector3(b,x,B)],null,s)),j.faces.push(new THREE.Face3(i,_,u,[new THREE.Vector3(m,A,H),new THREE.Vector3(U,p,L),new THREE.Vector3(b,x,B)],null,s))}}function l(r){var n=U.ntri_flat;if(n){var t=r+n*Uint32Array.BYTES_PER_ELEMENT*3;f(n,r,t)}}function R(r){var n=U.ntri_flat_uv;if(n){var t=r+n*Uint32Array.BYTES_PER_ELEMENT*3,e=t+n*Uint32Array.BYTES_PER_ELEMENT*3;f(n,r,e),s(n,t)}}function d(r){var n=U.ntri_smooth;if(n){var t=r+n*Uint32Array.BYTES_PER_ELEMENT*3,e=t+n*Uint32Array.BYTES_PER_ELEMENT*3;T(n,r,t,e)}}function h(r){var n=U.ntri_smooth_uv;if(n){var t=r+n*Uint32Array.BYTES_PER_ELEMENT*3,e=t+n*Uint32Array.BYTES_PER_ELEMENT*3,a=e+n*Uint32Array.BYTES_PER_ELEMENT*3;T(n,r,t,a),s(n,e)}}function w(r){var n=U.nquad_flat;if(n){var t=r+n*Uint32Array.BYTES_PER_ELEMENT*4;y(n,r,t)}}function m(r){var n=U.nquad_flat_uv;if(n){var t=r+n*Uint32Array.BYTES_PER_ELEMENT*4,e=t+n*Uint32Array.BYTES_PER_ELEMENT*4;y(n,r,e),c(n,t)}}function A(r){var n=U.nquad_smooth;if(n){var t=r+n*Uint32Array.BYTES_PER_ELEMENT*4,e=t+n*Uint32Array.BYTES_PER_ELEMENT*4;v(n,r,t,e)}}function H(r){var n=U.nquad_smooth_uv;if(n){var t=r+n*Uint32Array.BYTES_PER_ELEMENT*4,e=t+n*Uint32Array.BYTES_PER_ELEMENT*4,a=e+n*Uint32Array.BYTES_PER_ELEMENT*4;v(n,r,t,a),c(n,e)}}var U,p,L,b,x,B,P,S,V,M,N,Y,q,F,g,O,C,G,I,j=this,D=0,J=[],k=[];THREE.Geometry.call(this),U=e(r,D),D+=U.header_bytes,M=3*U.vertex_index_bytes+U.material_index_bytes,N=4*U.vertex_index_bytes+U.material_index_bytes,Y=U.ntri_flat*M,q=U.ntri_smooth*(M+3*U.normal_index_bytes),F=U.ntri_flat_uv*(M+3*U.uv_index_bytes),g=U.ntri_smooth_uv*(M+3*U.normal_index_bytes+3*U.uv_index_bytes),O=U.nquad_flat*N,C=U.nquad_smooth*(N+4*U.normal_index_bytes),G=U.nquad_flat_uv*(N+4*U.uv_index_bytes),I=U.nquad_smooth_uv*(N+4*U.normal_index_bytes+4*U.uv_index_bytes),D+=i(D),D+=_(D),D+=t(3*U.nnormals),D+=u(D),p=D,L=p+Y+t(2*U.ntri_flat),b=L+q+t(2*U.ntri_smooth),x=b+F+t(2*U.ntri_flat_uv),B=x+g+t(2*U.ntri_smooth_uv),P=B+O+t(2*U.nquad_flat),S=P+C+t(2*U.nquad_smooth),V=S+G+t(2*U.nquad_flat_uv),R(b),h(x),m(S),H(V),l(p),d(L),w(B),A(P),this.computeFaceNormals()};a.prototype=Object.create(THREE.Geometry.prototype),a.prototype.constructor=a;var E=new a(t),o=THREE.Loader.prototype.initMaterials(e,t,this.crossOrigin);n(E,o)}};