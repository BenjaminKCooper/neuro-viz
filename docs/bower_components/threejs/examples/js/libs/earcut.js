"use strict";function earcut(e,n,i){i=i||2;var t=n&&n.length,r=t?n[0]*i:e.length,o=filterPoints(e,linkedList(e,0,r,i,!0)),l=[];if(!o)return l;var u,s,x,v,f,a,d;if(t&&(o=eliminateHoles(e,n,o,i)),e.length>80*i){u=x=e[0],s=v=e[1];for(var c=i;c<r;c+=i)f=e[c],a=e[c+1],f<u&&(u=f),a<s&&(s=a),f>x&&(x=f),a>v&&(v=a);d=Math.max(x-u,v-s)}return earcutLinked(e,o,l,i,u,s,d),l}function linkedList(e,n,i,t,r){var o,l,u,s=0;for(o=n,l=i-t;o<i;o+=t)s+=(e[l]-e[o])*(e[o+1]+e[l+1]),l=o;if(r===s>0)for(o=n;o<i;o+=t)u=insertNode(o,u);else for(o=i-t;o>=n;o-=t)u=insertNode(o,u);return u}function filterPoints(e,n,i){if(!n)return n;i||(i=n);var t,r=n;do if(t=!1,r.steiner||!equals(e,r.i,r.next.i)&&0!==orient(e,r.prev.i,r.i,r.next.i))r=r.next;else{if(removeNode(r),r=i=r.prev,r===r.next)return null;t=!0}while(t||r!==i);return i}function earcutLinked(e,n,i,t,r,o,l,u){if(n){u||void 0===r||indexCurve(e,n,r,o,l);for(var s,x,v=n;n.prev!==n.next;)if(s=n.prev,x=n.next,isEar(e,n,r,o,l))i.push(s.i/t),i.push(n.i/t),i.push(x.i/t),removeNode(n),n=x.next,v=x.next;else if(n=x,n===v){u?1===u?(n=cureLocalIntersections(e,n,i,t),earcutLinked(e,n,i,t,r,o,l,2)):2===u&&splitEarcut(e,n,i,t,r,o,l):earcutLinked(e,filterPoints(e,n),i,t,r,o,l,1);break}}}function isEar(e,n,i,t,r){var o=n.prev.i,l=n.i,u=n.next.i,s=e[o],x=e[o+1],v=e[l],f=e[l+1],a=e[u],d=e[u+1],c=s*f-x*v,p=s*d-x*a,h=a*f-d*v,Z=c-p-h;if(Z<=0)return!1;var g,L,m,P,k,w,N,y=d-x,z=s-a,I=x-f,H=v-s;if(void 0!==i){var E=s<v?s<a?s:a:v<a?v:a,O=x<f?x<d?x:d:f<d?f:d,b=s>v?s>a?s:a:v>a?v:a,q=x>f?x>d?x:d:f>d?f:d,B=zOrder(E,O,i,t,r),C=zOrder(b,q,i,t,r);for(N=n.nextZ;N&&N.z<=C;)if(g=N.i,N=N.nextZ,g!==o&&g!==u&&(L=e[g],m=e[g+1],P=y*L+z*m-p,P>=0&&(k=I*L+H*m+c,k>=0&&(w=Z-P-k,w>=0&&(P&&k||P&&w||k&&w)))))return!1;for(N=n.prevZ;N&&N.z>=B;)if(g=N.i,N=N.prevZ,g!==o&&g!==u&&(L=e[g],m=e[g+1],P=y*L+z*m-p,P>=0&&(k=I*L+H*m+c,k>=0&&(w=Z-P-k,w>=0&&(P&&k||P&&w||k&&w)))))return!1}else for(N=n.next.next;N!==n.prev;)if(g=N.i,N=N.next,L=e[g],m=e[g+1],P=y*L+z*m-p,P>=0&&(k=I*L+H*m+c,k>=0&&(w=Z-P-k,w>=0&&(P&&k||P&&w||k&&w))))return!1;return!0}function cureLocalIntersections(e,n,i,t){var r=n;do{var o=r.prev,l=r.next.next;o.i!==l.i&&intersects(e,o.i,r.i,r.next.i,l.i)&&locallyInside(e,o,l)&&locallyInside(e,l,o)&&orient(e,o.i,r.i,l.i)&&orient(e,o.i,r.next.i,l.i)&&(i.push(o.i/t),i.push(r.i/t),i.push(l.i/t),removeNode(r),removeNode(r.next),r=n=l),r=r.next}while(r!==n);return r}function splitEarcut(e,n,i,t,r,o,l){var u=n;do{for(var s=u.next.next;s!==u.prev;){if(u.i!==s.i&&isValidDiagonal(e,u,s)){var x=splitPolygon(u,s);return u=filterPoints(e,u,u.next),x=filterPoints(e,x,x.next),earcutLinked(e,u,i,t,r,o,l),void earcutLinked(e,x,i,t,r,o,l)}s=s.next}u=u.next}while(u!==n)}function eliminateHoles(e,n,i,t){var r,o,l,u,s,x=[];for(r=0,o=n.length;r<o;r++)l=n[r]*t,u=r<o-1?n[r+1]*t:e.length,s=linkedList(e,l,u,t,!1),s===s.next&&(s.steiner=!0),s=filterPoints(e,s),s&&x.push(getLeftmost(e,s));for(x.sort(function(n,i){return e[n.i]-e[i.i]}),r=0;r<x.length;r++)eliminateHole(e,x[r],i),i=filterPoints(e,i,i.next);return i}function eliminateHole(e,n,i){if(i=findHoleBridge(e,n,i)){var t=splitPolygon(i,n);filterPoints(e,t,t.next)}}function findHoleBridge(e,n,i){var t,r,o,l=i,u=n.i,s=e[u],x=e[u+1],v=-(1/0);do{if(r=l.i,o=l.next.i,x<=e[r+1]&&x>=e[o+1]){var f=e[r]+(x-e[r+1])*(e[o]-e[r])/(e[o+1]-e[r+1]);f<=s&&f>v&&(v=f,t=e[r]<e[o]?l:l.next)}l=l.next}while(l!==i);if(!t)return null;var a,d,c,p,h,Z,g=e[t.i],L=e[t.i+1],m=s*L-x*g,P=s*x-x*v,k=x-x,w=s-v,N=x-L,y=g-s,z=m-P-(v*L-x*g),I=z<=0?-1:1,H=t,E=1/0;for(l=t.next;l!==H;)a=e[l.i],d=e[l.i+1],c=s-a,c>=0&&a>=g&&(p=(k*a+w*d-P)*I,p>=0&&(h=(N*a+y*d+m)*I,h>=0&&z*I-p-h>=0&&(Z=Math.abs(x-d)/c,(Z<E||Z===E&&a>g)&&locallyInside(e,l,n)&&(t=l,E=Z)))),l=l.next;return t}function indexCurve(e,n,i,t,r){var o=n;do null===o.z&&(o.z=zOrder(e[o.i],e[o.i+1],i,t,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==n);o.prevZ.nextZ=null,o.prevZ=null,sortLinked(o)}function sortLinked(e){var n,i,t,r,o,l,u,s,x=1;do{for(i=e,e=null,o=null,l=0;i;){for(l++,t=i,u=0,n=0;n<x&&(u++,t=t.nextZ,t);n++);for(s=x;u>0||s>0&&t;)0===u?(r=t,t=t.nextZ,s--):0!==s&&t?i.z<=t.z?(r=i,i=i.nextZ,u--):(r=t,t=t.nextZ,s--):(r=i,i=i.nextZ,u--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;i=t}o.nextZ=null,x*=2}while(l>1);return e}function zOrder(e,n,i,t,r){return e=32767*(e-i)/r,n=32767*(n-t)/r,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),n=16711935&(n|n<<8),n=252645135&(n|n<<4),n=858993459&(n|n<<2),n=1431655765&(n|n<<1),e|n<<1}function getLeftmost(e,n){var i=n,t=n;do e[i.i]<e[t.i]&&(t=i),i=i.next;while(i!==n);return t}function isValidDiagonal(e,n,i){return n.next.i!==i.i&&n.prev.i!==i.i&&!intersectsPolygon(e,n,n.i,i.i)&&locallyInside(e,n,i)&&locallyInside(e,i,n)&&middleInside(e,n,n.i,i.i)}function orient(e,n,i,t){var r=(e[i+1]-e[n+1])*(e[t]-e[i])-(e[i]-e[n])*(e[t+1]-e[i+1]);return r>0?1:r<0?-1:0}function equals(e,n,i){return e[n]===e[i]&&e[n+1]===e[i+1]}function intersects(e,n,i,t,r){return orient(e,n,i,t)!==orient(e,n,i,r)&&orient(e,t,r,n)!==orient(e,t,r,i)}function intersectsPolygon(e,n,i,t){var r=n;do{var o=r.i,l=r.next.i;if(o!==i&&l!==i&&o!==t&&l!==t&&intersects(e,o,l,i,t))return!0;r=r.next}while(r!==n);return!1}function locallyInside(e,n,i){return orient(e,n.prev.i,n.i,n.next.i)===-1?orient(e,n.i,i.i,n.next.i)!==-1&&orient(e,n.i,n.prev.i,i.i)!==-1:orient(e,n.i,i.i,n.prev.i)===-1||orient(e,n.i,n.next.i,i.i)===-1}function middleInside(e,n,i,t){var r=n,o=!1,l=(e[i]+e[t])/2,u=(e[i+1]+e[t+1])/2;do{var s=r.i,x=r.next.i;e[s+1]>u!=e[x+1]>u&&l<(e[x]-e[s])*(u-e[s+1])/(e[x+1]-e[s+1])+e[s]&&(o=!o),r=r.next}while(r!==n);return o}function splitPolygon(e,n){var i=new Node(e.i),t=new Node(n.i),r=e.next,o=n.prev;return e.next=n,n.prev=e,i.next=r,r.prev=i,t.next=i,i.prev=t,o.next=t,t.prev=o,t}function insertNode(e,n){var i=new Node(e);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function removeNode(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Node(e){this.i=e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}