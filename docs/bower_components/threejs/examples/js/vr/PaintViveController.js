THREE.PaintViveController=function(t){function e(){var t=document.createElement("canvas");t.width=256,t.height=256;for(var e=t.getContext("2d"),a=e.getImageData(0,0,256,256),n=a.data,r=0,i=0;r<n.length;r+=4,i++){var E=i%256/256-.5,l=Math.floor(i/256)/256-.5;s.setHSL(Math.atan2(l,E)/o,1,2*(.5-Math.sqrt(E*E+l*l))),n[r+0]=256*s.r,n[r+1]=256*s.g,n[r+2]=256*s.b,n[r+3]=256}return e.putImageData(a,0,0),new THREE.CanvasTexture(t)}function a(t){if(this.getButtonState("thumbpad")!==!1){var e=t.axes[0]/2,a=-t.axes[1]/2;i===r.COLOR&&(s.setHSL(Math.atan2(a,e)/o,1,2*(.5-Math.sqrt(e*e+a*a))),v.position.x=t.axes[0],v.position.y=t.axes[1]),i===r.SIZE&&(E=a+1)}}function n(t){return i===r.COLOR?(i=r.SIZE,void(c.visible=!1)):i===r.SIZE?(i=r.COLOR,void(c.visible=!0)):void 0}THREE.ViveController.call(this,t);var o=2*Math.PI,r={COLOR:0,SIZE:1},i=r.COLOR,s=new THREE.Color(1,1,1),E=1,l=new THREE.CircleGeometry(1,32),h=new THREE.MeshBasicMaterial({map:e()}),c=new THREE.Mesh(l,h);c.position.set(0,.005,.0495),c.rotation.x=-1.45,c.scale.setScalar(.02),this.add(c);var l=new THREE.IcosahedronGeometry(.1,2),h=new THREE.MeshBasicMaterial;h.color=s;var v=new THREE.Mesh(l,h);c.add(v),this.getColor=function(){return s},this.getSize=function(){return E},this.addEventListener("axischanged",a),this.addEventListener("gripsdown",n)},THREE.PaintViveController.prototype=Object.create(THREE.ViveController.prototype),THREE.PaintViveController.prototype.constructor=THREE.PaintViveController;