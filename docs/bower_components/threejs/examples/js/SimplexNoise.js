var SimplexNoise=function(t){void 0==t&&(t=Math),this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(var r=0;r<256;r++)this.p[r]=Math.floor(256*t.random());this.perm=[];for(var r=0;r<512;r++)this.perm[r]=this.p[255&r];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]};SimplexNoise.prototype.dot=function(t,r,i){return t[0]*r+t[1]*i},SimplexNoise.prototype.dot3=function(t,r,i,o){return t[0]*r+t[1]*i+t[2]*o},SimplexNoise.prototype.dot4=function(t,r,i,o,s){return t[0]*r+t[1]*i+t[2]*o+t[3]*s},SimplexNoise.prototype.noise=function(t,r){var i,o,s,h,e,p=.5*(Math.sqrt(3)-1),a=(t+r)*p,m=Math.floor(t+a),d=Math.floor(r+a),n=(3-Math.sqrt(3))/6,f=(m+d)*n,l=m-f,v=d-f,M=t-l,u=r-v;M>u?(h=1,e=0):(h=0,e=1);var g=M-h+n,x=u-e+n,c=M-1+2*n,N=u-1+2*n,S=255&m,y=255&d,q=this.perm[S+this.perm[y]]%12,b=this.perm[S+h+this.perm[y+e]]%12,j=this.perm[S+1+this.perm[y+1]]%12,k=.5-M*M-u*u;k<0?i=0:(k*=k,i=k*k*this.dot(this.grad3[q],M,u));var w=.5-g*g-x*x;w<0?o=0:(w*=w,o=w*w*this.dot(this.grad3[b],g,x));var z=.5-c*c-N*N;return z<0?s=0:(z*=z,s=z*z*this.dot(this.grad3[j],c,N)),70*(i+o+s)},SimplexNoise.prototype.noise3d=function(t,r,i){var o,s,h,e,p,a,m,d,n,f,l=1/3,v=(t+r+i)*l,M=Math.floor(t+v),u=Math.floor(r+v),g=Math.floor(i+v),x=1/6,c=(M+u+g)*x,N=M-c,S=u-c,y=g-c,q=t-N,b=r-S,j=i-y;q>=b?b>=j?(p=1,a=0,m=0,d=1,n=1,f=0):q>=j?(p=1,a=0,m=0,d=1,n=0,f=1):(p=0,a=0,m=1,d=1,n=0,f=1):b<j?(p=0,a=0,m=1,d=0,n=1,f=1):q<j?(p=0,a=1,m=0,d=0,n=1,f=1):(p=0,a=1,m=0,d=1,n=1,f=0);var k=q-p+x,w=b-a+x,z=j-m+x,A=q-d+2*x,B=b-n+2*x,C=j-f+2*x,D=q-1+3*x,E=b-1+3*x,F=j-1+3*x,G=255&M,H=255&u,I=255&g,J=this.perm[G+this.perm[H+this.perm[I]]]%12,K=this.perm[G+p+this.perm[H+a+this.perm[I+m]]]%12,L=this.perm[G+d+this.perm[H+n+this.perm[I+f]]]%12,O=this.perm[G+1+this.perm[H+1+this.perm[I+1]]]%12,P=.6-q*q-b*b-j*j;P<0?o=0:(P*=P,o=P*P*this.dot3(this.grad3[J],q,b,j));var Q=.6-k*k-w*w-z*z;Q<0?s=0:(Q*=Q,s=Q*Q*this.dot3(this.grad3[K],k,w,z));var R=.6-A*A-B*B-C*C;R<0?h=0:(R*=R,h=R*R*this.dot3(this.grad3[L],A,B,C));var T=.6-D*D-E*E-F*F;return T<0?e=0:(T*=T,e=T*T*this.dot3(this.grad3[O],D,E,F)),32*(o+s+h+e)},SimplexNoise.prototype.noise4d=function(t,r,i,o){var s,h,e,p,a,m,d,n,f,l,v,M,u,g,x,c,N,S=this.grad4,y=this.simplex,q=this.perm,b=(Math.sqrt(5)-1)/4,j=(5-Math.sqrt(5))/20,k=(t+r+i+o)*b,w=Math.floor(t+k),z=Math.floor(r+k),A=Math.floor(i+k),B=Math.floor(o+k),C=(w+z+A+B)*j,D=w-C,E=z-C,F=A-C,G=B-C,H=t-D,I=r-E,J=i-F,K=o-G,L=H>I?32:0,O=H>J?16:0,P=I>J?8:0,Q=H>K?4:0,R=I>K?2:0,T=J>K?1:0,U=L+O+P+Q+R+T;m=y[U][0]>=3?1:0,d=y[U][1]>=3?1:0,n=y[U][2]>=3?1:0,f=y[U][3]>=3?1:0,l=y[U][0]>=2?1:0,v=y[U][1]>=2?1:0,M=y[U][2]>=2?1:0,u=y[U][3]>=2?1:0,g=y[U][0]>=1?1:0,x=y[U][1]>=1?1:0,c=y[U][2]>=1?1:0,N=y[U][3]>=1?1:0;var V=H-m+j,W=I-d+j,X=J-n+j,Y=K-f+j,Z=H-l+2*j,$=I-v+2*j,_=J-M+2*j,tt=K-u+2*j,rt=H-g+3*j,it=I-x+3*j,ot=J-c+3*j,st=K-N+3*j,ht=H-1+4*j,et=I-1+4*j,pt=J-1+4*j,at=K-1+4*j,mt=255&w,dt=255&z,nt=255&A,ft=255&B,lt=q[mt+q[dt+q[nt+q[ft]]]]%32,vt=q[mt+m+q[dt+d+q[nt+n+q[ft+f]]]]%32,Mt=q[mt+l+q[dt+v+q[nt+M+q[ft+u]]]]%32,ut=q[mt+g+q[dt+x+q[nt+c+q[ft+N]]]]%32,gt=q[mt+1+q[dt+1+q[nt+1+q[ft+1]]]]%32,xt=.6-H*H-I*I-J*J-K*K;xt<0?s=0:(xt*=xt,s=xt*xt*this.dot4(S[lt],H,I,J,K));var ct=.6-V*V-W*W-X*X-Y*Y;ct<0?h=0:(ct*=ct,h=ct*ct*this.dot4(S[vt],V,W,X,Y));var Nt=.6-Z*Z-$*$-_*_-tt*tt;Nt<0?e=0:(Nt*=Nt,e=Nt*Nt*this.dot4(S[Mt],Z,$,_,tt));var St=.6-rt*rt-it*it-ot*ot-st*st;St<0?p=0:(St*=St,p=St*St*this.dot4(S[ut],rt,it,ot,st));var yt=.6-ht*ht-et*et-pt*pt-at*at;return yt<0?a=0:(yt*=yt,a=yt*yt*this.dot4(S[gt],ht,et,pt,at)),27*(s+h+e+p+a)};