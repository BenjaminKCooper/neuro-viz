<!DOCTYPE html><html lang="en"><head>
		<title>three.js webgl - node material</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,user-scalable=no,minimum-scale=1,maximum-scale=1">
		<style>
			body {
				color: #fff;
				font-family:Monospace;
				font-size:13px;
				margin: 0px;
				text-align:center;
				overflow: hidden;
			}

			#info {
				color: #fff;
				position: absolute;
				top: 10px;
				width: 100%;
				text-align: center;
				display:block;
			}

			a { color: white }
		</style>
	</head>
	<body>

		<div id="container"></div>
		<div id="info">
			<a href="http://threejs.org" target="_blank">three.js</a> - Node-Based Material
		</div>

		<script src="../build/three.js"></script>

		<script src="js/geometries/TeapotBufferGeometry.js"></script>
		<script src="js/controls/OrbitControls.js"></script>
		<script src="js/libs/dat.gui.min.js"></script>

		
		<script src="js/nodes/GLNode.js"></script>
		<script src="js/nodes/RawNode.js"></script>
		<script src="js/nodes/TempNode.js"></script>
		<script src="js/nodes/InputNode.js"></script>
		<script src="js/nodes/ConstNode.js"></script>
		<script src="js/nodes/VarNode.js"></script>
		<script src="js/nodes/FunctionNode.js"></script>
		<script src="js/nodes/FunctionCallNode.js"></script>
		<script src="js/nodes/AttributeNode.js"></script>
		<script src="js/nodes/NodeBuilder.js"></script>
		<script src="js/nodes/NodeLib.js"></script>
		<script src="js/nodes/NodeMaterial.js"></script>

		
		<script src="js/nodes/accessors/PositionNode.js"></script>
		<script src="js/nodes/accessors/NormalNode.js"></script>
		<script src="js/nodes/accessors/UVNode.js"></script>
		<script src="js/nodes/accessors/ScreenUVNode.js"></script>
		<script src="js/nodes/accessors/ColorsNode.js"></script>
		<script src="js/nodes/accessors/CameraNode.js"></script>
		<script src="js/nodes/accessors/ReflectNode.js"></script>
		<script src="js/nodes/accessors/LightNode.js"></script>

		
		<script src="js/nodes/inputs/IntNode.js"></script>
		<script src="js/nodes/inputs/FloatNode.js"></script>
		<script src="js/nodes/inputs/ColorNode.js"></script>
		<script src="js/nodes/inputs/Vector2Node.js"></script>
		<script src="js/nodes/inputs/Vector3Node.js"></script>
		<script src="js/nodes/inputs/Vector4Node.js"></script>
		<script src="js/nodes/inputs/TextureNode.js"></script>
		<script src="js/nodes/inputs/CubeTextureNode.js"></script>

		
		<script src="js/nodes/math/Math1Node.js"></script>
		<script src="js/nodes/math/Math2Node.js"></script>
		<script src="js/nodes/math/Math3Node.js"></script>
		<script src="js/nodes/math/OperatorNode.js"></script>

		
		<script src="js/nodes/utils/SwitchNode.js"></script>
		<script src="js/nodes/utils/JoinNode.js"></script>
		<script src="js/nodes/utils/TimerNode.js"></script>
		<script src="js/nodes/utils/RoughnessToBlinnExponentNode.js"></script>
		<script src="js/nodes/utils/VelocityNode.js"></script>
		<script src="js/nodes/utils/LuminanceNode.js"></script>
		<script src="js/nodes/utils/ColorAdjustmentNode.js"></script>
		<script src="js/nodes/utils/NoiseNode.js"></script>
		<script src="js/nodes/utils/ResolutionNode.js"></script>
		<script src="js/nodes/utils/BumpNode.js"></script>
		<script src="js/nodes/utils/BlurNode.js"></script>

		
		<script src="js/nodes/materials/PhongNode.js"></script>
		<script src="js/nodes/materials/PhongNodeMaterial.js"></script>

		
		<script src="js/nodes/materials/StandardNode.js"></script>
		<script src="js/nodes/materials/StandardNodeMaterial.js"></script>

		<script>function getTexture(e){var o=textures[e].texture;return o||(o=textures[e].texture=(new THREE.TextureLoader).load(textures[e].url),o.wrapS=o.wrapT=THREE.RepeatWrapping),o}function init(){renderer=new THREE.WebGLRenderer({antialias:!0}),renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth,window.innerHeight),container.appendChild(renderer.domElement),scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(fov,window.innerWidth/window.innerHeight,1,1e3),camera.position.x=50,camera.position.z=-50,camera.position.y=30,camera.target=new THREE.Vector3,controls=new THREE.OrbitControls(camera,renderer.domElement),controls.minDistance=50,controls.maxDistance=200,scene.add(new THREE.AmbientLight(4605510));var e=new THREE.DirectionalLight(16768460,1);e.position.set(1,.75,.5),scene.add(e);var e=new THREE.DirectionalLight(13421823,1);e.position.set(-1,.75,-.5),scene.add(e),teapot=new THREE.TeapotBufferGeometry(15,18),mesh=new THREE.Mesh(teapot),scene.add(mesh),window.addEventListener("resize",onWindowResize,!1),updateMaterial(),onWindowResize(),animate()}function clearGui(){gui&&gui.destroy(),gui=new dat.GUI;gui.add(param,"example",{"basic / standard":"standard","basic / physical":"physical","basic / phong":"phong","basic / layers":"layers","basic / rim":"rim","basic / color-adjustment":"color-adjustment","basic / bump":"bump","basic / blur":"blur","basic / spherical-reflection":"spherical-reflection","adv / fresnel":"fresnel","adv / saturation":"saturation","adv / top-bottom":"top-bottom","adv / skin":"skin","adv / skin-phong":"skin-phong","adv / caustic":"caustic","adv / displace":"displace","adv / plush":"plush","adv / toon":"toon","adv / camera-depth":"camera-depth","adv / soft-body":"soft-body","adv / wave":"wave","adv / triangle-blur":"triangle-blur","adv / expression":"expression","adv / sss":"sss","adv / translucent":"translucent","misc / smoke":"smoke","misc / firefly":"firefly","misc / reserved-keywords":"reserved-keywords","misc / varying":"varying","misc / custom-attribute":"custom-attribute"}).onFinishChange(function(){updateMaterial()});gui.open()}function addGui(e,o,n,t,r,a){var E;return param[e]=o,E=t?gui.addColor(param,e).onChange(function(){n(param[e])}):"object"==typeof o?gui.add(param,e,o).onChange(function(){n(param[e])}):gui.add(param,e,r,a).onChange(function(){n(param[e])})}function updateMaterial(){move=!1,mesh.material&&mesh.material.dispose(),rtTexture&&(rtTexture.dispose(),rtTexture=null),rtMaterial&&(rtMaterial.dispose(),rtMaterial=null);var e,o=param.example;switch(clearGui(),o){case"phong":e=new THREE.PhongNodeMaterial;var n=new THREE.SwitchNode(new THREE.TextureNode(getTexture("decalDiffuse")),"w");e.color=new THREE.TextureNode(getTexture("grass")),e.specular=new THREE.FloatNode(.5),e.shininess=new THREE.FloatNode(15),e.environment=new THREE.CubeTextureNode(cubemap),e.environmentAlpha=n,e.normal=new THREE.TextureNode(getTexture("grassNormal")),e.normalScale=new THREE.Math1Node(n,THREE.Math1Node.INVERT);break;case"standard":e=new THREE.StandardNodeMaterial;var n=new THREE.SwitchNode(new THREE.TextureNode(getTexture("decalDiffuse")),"w"),t=new THREE.FloatNode(.3),r=new THREE.FloatNode(.5),a=new THREE.FloatNode(.5),E=new THREE.FloatNode(0),d=new THREE.FloatNode(1),i=new THREE.Math3Node(r,E,n,THREE.Math3Node.MIX),T=new THREE.Math3Node(a,d,n,THREE.Math3Node.MIX),u=new THREE.OperatorNode(new THREE.Math1Node(n,THREE.Math1Node.INVERT),t,THREE.OperatorNode.MUL);e.color=new THREE.ColorNode(15658734),e.roughness=i,e.metalness=T,e.environment=new THREE.CubeTextureNode(cubemap),e.normal=new THREE.TextureNode(getTexture("grassNormal")),e.normalScale=u,addGui("color",e.color.value.getHex(),function(o){e.color.value.setHex(o)},!0),addGui("roughnessA",r.number,function(e){r.number=e},!1,0,1),addGui("metalnessA",a.number,function(e){a.number=e},!1,0,1),addGui("roughnessB",E.number,function(e){E.number=e},!1,0,1),addGui("metalnessB",d.number,function(e){d.number=e},!1,0,1),addGui("normalScale",t.number,function(e){t.number=e},!1,0,1);break;case"physical":e=new THREE.StandardNodeMaterial;var n=new THREE.SwitchNode(new THREE.TextureNode(getTexture("decalDiffuse")),"w"),t=new THREE.FloatNode(.3),r=new THREE.FloatNode(.5),a=new THREE.FloatNode(.5),E=new THREE.FloatNode(0),d=new THREE.FloatNode(1),H=new THREE.FloatNode(0),R=new THREE.FloatNode(1),N=new THREE.FloatNode(1),i=new THREE.Math3Node(r,E,n,THREE.Math3Node.MIX),T=new THREE.Math3Node(a,d,n,THREE.Math3Node.MIX),u=new THREE.OperatorNode(new THREE.Math1Node(n,THREE.Math1Node.INVERT),t,THREE.OperatorNode.MUL);e.color=new THREE.ColorNode(15658734),e.roughness=i,e.metalness=T,e.reflectivity=H,e.clearCoat=R,e.clearCoatRoughness=N,e.environment=new THREE.CubeTextureNode(cubemap),e.normal=new THREE.TextureNode(getTexture("grassNormal")),e.normalScale=u,addGui("color",e.color.value.getHex(),function(o){e.color.value.setHex(o)},!0),addGui("reflectivity",H.number,function(e){H.number=e},!1,0,1),addGui("clearCoat",R.number,function(e){R.number=e},!1,0,1),addGui("clearCoatRoughness",N.number,function(e){N.number=e},!1,0,1),addGui("roughnessA",r.number,function(e){r.number=e},!1,0,1),addGui("metalnessA",a.number,function(e){a.number=e},!1,0,1),addGui("roughnessB",E.number,function(e){E.number=e},!1,0,1),addGui("metalnessB",d.number,function(e){d.number=e},!1,0,1),addGui("normalScale",t.number,function(e){t.number=e},!1,0,1);break;case"wave":e=new THREE.PhongNodeMaterial;var l=new THREE.TimerNode,s=new THREE.FloatNode(5),w=new THREE.FloatNode(1),c=new THREE.FloatNode(.4),m=new THREE.ColorNode(16777215),p=new THREE.ColorNode(21727),h=new THREE.UVNode,b=new THREE.OperatorNode(l,s,THREE.OperatorNode.MUL),M=new THREE.OperatorNode(new THREE.PositionNode,c,THREE.OperatorNode.MUL),v=new THREE.OperatorNode(M,b,THREE.OperatorNode.ADD),f=new THREE.Math1Node(v,THREE.Math1Node.SIN);f=new THREE.SwitchNode(f,"x");var g=new THREE.OperatorNode(f,w,THREE.OperatorNode.MUL),x=new THREE.JoinNode(new THREE.FloatNode,g,new THREE.FloatNode),O=new THREE.OperatorNode(new THREE.NormalNode,x,THREE.OperatorNode.MUL),F=new THREE.OperatorNode(new THREE.PositionNode,x,THREE.OperatorNode.ADD),G=new THREE.Math3Node(p,m,f,THREE.Math3Node.MIX);e.color=G,e.transform=F,addGui("speed",s.number,function(e){s.number=e},!1,0,10),addGui("scale",w.number,function(e){w.number=e},!1,0,3),addGui("worldScale",c.number,function(e){c.number=e},!1,0,1),addGui("colorA",m.value.getHex(),function(e){m.value.setHex(e)},!0),addGui("colorB",p.value.getHex(),function(e){p.value.setHex(e)},!0),addGui("useNormals",!1,function(o){F.b=o?O:x,e.build()});break;case"rim":e=new THREE.PhongNodeMaterial;var C=1.3,k=new THREE.FloatNode(3),G=new THREE.ColorNode(16777215),y=new THREE.Math2Node(new THREE.NormalNode(THREE.NormalNode.VIEW),new THREE.Vector3Node(0,0,-C),THREE.Math2Node.DOT),S=new THREE.OperatorNode(y,new THREE.FloatNode(C),THREE.OperatorNode.ADD),A=new THREE.Math2Node(S,k,THREE.Math2Node.POW),L=new THREE.OperatorNode(A,G,THREE.OperatorNode.MUL);e.color=new THREE.ColorNode(1118481),e.emissive=L,addGui("color",G.value.getHex(),function(e){G.value.setHex(e)},!0),addGui("intensity",C,function(e){C=e,y.b.z=-C,S.b.number=C},!1,0,3),addGui("power",k.number,function(e){k.number=e},!1,0,6),addGui("xray",!1,function(o){o?(e.emissive=G,e.alpha=A,e.blending=THREE.AdditiveBlending,e.depthWrite=!1):(e.emissive=L,e.alpha=null,e.blending=THREE.NormalBlending,e.depthWrite=!0),e.build()});break;case"color-adjustment":e=new THREE.PhongNodeMaterial;var I=new THREE.TextureNode(getTexture("brick")),D=new THREE.FloatNode,P=new THREE.FloatNode(1),U=new THREE.FloatNode,V=new THREE.FloatNode(0),j=new THREE.FloatNode(1),B=new THREE.ColorAdjustmentNode(I,D,THREE.ColorAdjustmentNode.HUE),W=new THREE.ColorAdjustmentNode(B,P,THREE.ColorAdjustmentNode.SATURATION),X=new THREE.ColorAdjustmentNode(W,U,THREE.ColorAdjustmentNode.VIBRANCE),z=new THREE.ColorAdjustmentNode(X,V,THREE.ColorAdjustmentNode.BRIGHTNESS),Z=new THREE.ColorAdjustmentNode(z,j,THREE.ColorAdjustmentNode.CONTRAST);e.color=Z,addGui("hue",D.number,function(e){D.number=e},!1,0,2*Math.PI),addGui("saturation",P.number,function(e){P.number=e},!1,0,2),addGui("vibrance",U.number,function(e){U.number=e},!1,-1,1),addGui("brightness",V.number,function(e){V.number=e},!1,0,.5),addGui("contrast",j.number,function(e){j.number=e},!1,0,2);break;case"bump":e=new THREE.PhongNodeMaterial;var _=new THREE.TextureNode(getTexture("brick")),Y=new THREE.BumpNode(new THREE.TextureNode(getTexture("brick")));Y.scale=new THREE.Vector2Node(-1.5,-1.5),e.color=_,e.normal=Y,addGui("scaleX",Y.scale.x,function(e){Y.scale.x=e},!1,-2,2),addGui("scaleY",Y.scale.y,function(e){Y.scale.y=e},!1,-2,2),addGui("color",!0,function(o){e.color=o?_:new THREE.ColorNode(15658734),e.build()});break;case"blur":e=new THREE.PhongNodeMaterial;var _=new THREE.TextureNode(getTexture("brick")),K=new THREE.BlurNode(new THREE.TextureNode(getTexture("brick")));e.color=K,addGui("radiusX",K.radius.x,function(e){K.radius.x=e},!1,0,15),addGui("radiusY",K.radius.y,function(e){K.radius.y=e},!1,0,15);break;case"spherical-reflection":e=new THREE.PhongNodeMaterial,e.environment=new THREE.TextureNode(getTexture("spherical"),new THREE.ReflectNode(THREE.ReflectNode.SPHERE));break;case"fresnel":e=new THREE.PhongNodeMaterial;var q=new THREE.FloatNode(1.3),k=new THREE.FloatNode(1),G=new THREE.CubeTextureNode(cubemap),y=new THREE.Math2Node(new THREE.NormalNode(THREE.NormalNode.VIEW),new THREE.Vector3Node(0,0,-1),THREE.Math2Node.DOT),J=new THREE.OperatorNode(y,new THREE.FloatNode(1),THREE.OperatorNode.ADD),Q=new THREE.Math2Node(J,k,THREE.Math2Node.POW),$=new THREE.OperatorNode(q,Q,THREE.OperatorNode.MUL);e.color=new THREE.ColorNode(3381759),e.environment=G,e.environmentAlpha=new THREE.Math1Node($,THREE.Math1Node.SAT),addGui("reflectance",q.number,function(e){q.number=e},!1,0,3),addGui("power",k.number,function(e){k.number=e},!1,0,5);break;case"layers":e=new THREE.PhongNodeMaterial;var ee=new THREE.TextureNode(getTexture("grass")),oe=new THREE.TextureNode(getTexture("brick")),ne=new THREE.FloatNode(0),w=new THREE.FloatNode(1),h=new THREE.UVNode,te=new THREE.OperatorNode(ne,h,THREE.OperatorNode.ADD),re=new THREE.OperatorNode(te,w,THREE.OperatorNode.MUL),n=new THREE.TextureNode(getTexture("decalDiffuse"),re),ae=new THREE.SwitchNode(n,"w"),F=new THREE.Math3Node(ee,oe,ae,THREE.Math3Node.MIX);e.color=F,addGui("offset",ne.number,function(e){ne.number=e},!1,0,1),addGui("scale",w.number,function(e){w.number=e},!1,0,10);break;case"saturation":e=new THREE.StandardNodeMaterial;var Ee=new THREE.TextureNode(getTexture("brick")),de=new THREE.FloatNode(0),ie=new THREE.FunctionNode(["vec3 satrgb(vec3 rgb, float adjustment) {","\tvec3 intensity = vec3(dot(rgb, LUMA));","\treturn mix(intensity, rgb, adjustment);","}"].join("\n")),Te=new THREE.FunctionCallNode(ie);Te.inputs.rgb=Ee,Te.inputs.adjustment=de,e.color=Te,addGui("saturation",de.number,function(e){de.number=e},!1,0,2);break;case"top-bottom":e=new THREE.PhongNodeMaterial;var ue=new THREE.TextureNode(getTexture("grass")),He=new THREE.TextureNode(getTexture("brick")),Re=new THREE.NormalNode(THREE.NormalNode.WORLD),Ne=new THREE.SwitchNode(Re,"y"),le=new THREE.FloatNode(9),ne=new THREE.FloatNode(-2.5),se=new THREE.OperatorNode(Ne,le,THREE.OperatorNode.MUL),we=new THREE.OperatorNode(se,ne,THREE.OperatorNode.ADD),ce=new THREE.Math1Node(we,THREE.Math1Node.SAT),F=new THREE.Math3Node(ue,He,ce,THREE.Math3Node.MIX);e.color=F,addGui("hard",le.number,function(e){le.number=e},!1,0,20),addGui("offset",ne.number,function(e){ne.number=e},!1,-10,10);break;case"displace":e=new THREE.PhongNodeMaterial;var l=new THREE.TimerNode,w=new THREE.FloatNode(2),s=new THREE.FloatNode(.2),m=new THREE.ColorNode(16777215),p=new THREE.ColorNode(21727),h=new THREE.UVNode,me=new THREE.OperatorNode(l,s,THREE.OperatorNode.MUL),pe=new THREE.OperatorNode(me,h,THREE.OperatorNode.ADD),Ee=new THREE.TextureNode(getTexture("cloud"),pe),he=new THREE.SwitchNode(Ee,"w"),O=new THREE.OperatorNode(new THREE.NormalNode,he,THREE.OperatorNode.MUL),be=new THREE.OperatorNode(O,w,THREE.OperatorNode.MUL),F=new THREE.OperatorNode(new THREE.PositionNode,be,THREE.OperatorNode.ADD),G=new THREE.Math3Node(p,m,he,THREE.Math3Node.MIX);e.color=e.specular=new THREE.ColorNode(0),e.emissive=G,e.transform=F,addGui("speed",s.number,function(e){s.number=e},!1,0,1),addGui("scale",w.number,function(e){w.number=e},!1,0,10),addGui("colorA",m.value.getHex(),function(e){m.value.setHex(e)},!0),addGui("colorB",p.value.getHex(),function(e){p.value.setHex(e)},!0);break;case"smoke":e=new THREE.PhongNodeMaterial;var l=new THREE.TimerNode,h=new THREE.UVNode,Me=new THREE.OperatorNode(l,new THREE.Vector2Node(.3,.1),THREE.OperatorNode.MUL),ve=new THREE.OperatorNode(l,new THREE.Vector2Node(.15,.4),THREE.OperatorNode.MUL),fe=new THREE.OperatorNode(Me,h,THREE.OperatorNode.ADD),ge=new THREE.OperatorNode(ve,h,THREE.OperatorNode.ADD),xe=new THREE.TextureNode(getTexture("cloud"),fe),Oe=new THREE.TextureNode(getTexture("cloud"),ge),Fe=new THREE.OperatorNode(xe,Oe,THREE.OperatorNode.ADD);e.environment=new THREE.ColorNode(16777215),e.alpha=Fe,addGui("color",e.environment.value.getHex(),function(o){e.environment.value.setHex(o)},!0);break;case"camera-depth":var m=new THREE.ColorNode(16777215),p=new THREE.ColorNode(21727),Ge=new THREE.CameraNode(THREE.CameraNode.DEPTH);Ge.near.number=1,Ge.far.number=200;var Ce=new THREE.Math3Node(p,m,Ge,THREE.Math3Node.MIX);e=new THREE.PhongNodeMaterial,e.color=Ce,addGui("near",Ge.near.number,function(e){Ge.near.number=e},!1,1,1200),addGui("far",Ge.far.number,function(e){Ge.far.number=e},!1,1,1200),addGui("nearColor",m.value.getHex(),function(e){m.value.setHex(e)},!0),addGui("farColor",p.value.getHex(),function(e){p.value.setHex(e)},!0);break;case"caustic":e=new THREE.StandardNodeMaterial;var ke=new THREE.FunctionNode(["vec2 hash2(vec2 p) {","\treturn fract(sin(vec2(dot(p, vec2(123.4, 748.6)), dot(p, vec2(547.3, 659.3))))*5232.85324);","}"].join("\n")),ye=new THREE.FunctionNode(["float voronoi(vec2 p, in float time) {","\tvec2 n = floor(p);","\tvec2 f = fract(p);","\tfloat md = 5.0;","\tvec2 m = vec2(0.0);","\tfor (int i = -1; i <= 1; i++) {","\t\tfor (int j = -1; j <= 1; j++) {","\t\t\tvec2 g = vec2(i, j);","\t\t\tvec2 o = hash2(n + g);","\t\t\to = 0.5 + 0.5 * sin(time + 5.038 * o);","\t\t\tvec2 r = g + o - f;","\t\t\tfloat d = dot(r, r);","\t\t\tif (d < md) {","\t\t\t\tmd = d;","\t\t\t\tm = n+g+o;","\t\t\t}","\t\t}","\t}","\treturn md;","}"].join("\n"),[ke]),Se=new THREE.FunctionNode(["float voronoiLayers(vec2 p, in float time) {","\tfloat v = 0.0;","\tfloat a = 0.4;","\tfor (int i = 0; i < 3; i++) {","\t\tv += voronoi(p, time) * a;","\t\tp *= 2.0;","\t\ta *= 0.5;","\t}","\treturn v;","}"].join("\n"),[ye]),l=new THREE.TimerNode,b=new THREE.FloatNode(2),Ae=new THREE.FloatNode(1),w=new THREE.FloatNode(.1),C=new THREE.FloatNode(1.5),G=new THREE.ColorNode(16777215),m=new THREE.ColorNode(16777215),p=new THREE.ColorNode(21727),Le=new THREE.PositionNode(THREE.PositionNode.WORLD),Ie=new THREE.SwitchNode(Le,"xz"),De=new THREE.NormalNode(THREE.NormalNode.WORLD),n=new THREE.SwitchNode(De,"y");n=new THREE.Math1Node(n,THREE.Math1Node.SAT);var Pe=new THREE.OperatorNode(l,b,THREE.OperatorNode.MUL),Ue=new THREE.OperatorNode(Ie,w,THREE.OperatorNode.MUL),ye=new THREE.FunctionCallNode(Se);ye.inputs.p=Ue,ye.inputs.time=Pe;var Ve=new THREE.OperatorNode(Ae,n,THREE.OperatorNode.MUL),je=new THREE.OperatorNode(ye,C,THREE.OperatorNode.MUL),Be=new THREE.Math3Node(p,m,new THREE.Math1Node(je,THREE.Math1Node.SAT),THREE.Math3Node.MIX),We=new THREE.Math3Node(G,Be,Ve,THREE.Math3Node.MIX),Xe=new THREE.OperatorNode(je,Ve,THREE.OperatorNode.MUL);e.color=We,e.ambient=Xe,addGui("timeScale",b.number,function(e){b.number=e},!1,0,5),addGui("intensity",C.number,function(e){C.number=e},!1,0,3),addGui("scale",w.number,function(e){w.number=e},!1,0,1),addGui("alpha",Ae.number,function(e){Ae.number=e},!1,0,1),addGui("color",G.value.getHex(),function(e){G.value.setHex(e)},!0),addGui("colorA",m.value.getHex(),function(e){m.value.setHex(e)},!0),addGui("colorB",p.value.getHex(),function(e){p.value.setHex(e)},!0);break;case"soft-body":move=!0,e=new THREE.StandardNodeMaterial;var w=new THREE.FloatNode(2),m=new THREE.ColorNode(16737843),p=new THREE.ColorNode(3368703),ze=new THREE.PositionNode,Ze=new THREE.Math1Node(ze,THREE.Math1Node.NORMALIZE),n=new THREE.SwitchNode(Ze,"y"),_e=new THREE.VelocityNode(mesh,{type:"elastic",spring:.8,friction:.9}),Ye=new THREE.OperatorNode(n,w,THREE.OperatorNode.MUL),Ke=new THREE.OperatorNode(_e,Ye,THREE.OperatorNode.MUL),qe=new THREE.OperatorNode(new THREE.PositionNode,Ke,THREE.OperatorNode.ADD),Ce=new THREE.Math3Node(p,m,n,THREE.Math3Node.MIX);e.color=Ce,e.transform=qe,addGui("spring",_e.params.spring,function(e){_e.params.spring=e},!1,0,.9),addGui("friction",_e.params.friction,function(e){_e.params.friction=e},!1,0,.9),addGui("scale",w.number,function(e){w.number=e},!1,0,3),addGui("softBody",m.value.getHex(),function(e){m.value.setHex(e)},!0),addGui("rigidBody",p.value.getHex(),function(e){p.value.setHex(e)},!0);break;case"plush":e=new THREE.PhongNodeMaterial;var G=new THREE.ColorNode(9274999),Je=new THREE.FloatNode(1.6),Qe=new THREE.FloatNode(.5),$e=new THREE.Math1Node(new THREE.PositionNode(THREE.PositionNode.VIEW),THREE.Math1Node.NORMALIZE),eo=new THREE.Math1Node(new THREE.NormalNode(THREE.NormalNode.VIEW),THREE.Math1Node.NORMALIZE),y=new THREE.Math2Node($e,eo,THREE.Math2Node.DOT),oo=new THREE.OperatorNode(G,Je,THREE.OperatorNode.MUL),no=new THREE.OperatorNode(y,Qe,THREE.OperatorNode.MUL);e.color=G,e.normal=new THREE.TextureNode(getTexture("grassNormal")),e.normalScale=no,e.environment=oo,e.environmentAlpha=new THREE.Math1Node(y,THREE.Math1Node.INVERT),e.shininess=new THREE.FloatNode(0),addGui("color",G.value.getHex(),function(e){G.value.setHex(e)},!0),addGui("mildness",Je.number,function(e){Je.number=e},!1,1,2),addGui("fur",Qe.number,function(e){Qe.number=e},!1,0,2);break;case"skin":case"skin-phong":e="skin"==o?new THREE.StandardNodeMaterial:new THREE.PhongNodeMaterial;var to=new THREE.ColorNode(16762005),ro=new THREE.ColorNode(7013890),ao=new THREE.FloatNode(1.5),Eo=new THREE.FloatNode(0),io=new THREE.LightNode,To=new THREE.LuminanceNode(io),uo=new THREE.Math3Node(Eo,ao,To,THREE.Math3Node.SMOOTHSTEP),Ho=new THREE.OperatorNode(uo,new THREE.ConstNode(THREE.ConstNode.PI2),THREE.OperatorNode.MUL),Ro=new THREE.Math1Node(Ho,THREE.Math1Node.SIN),No=new THREE.OperatorNode(Ro,ro,THREE.OperatorNode.MUL),lo=new THREE.Math1Node(No,THREE.Math1Node.SAT),so=new THREE.OperatorNode(io,lo,THREE.OperatorNode.ADD);e.color=to,e.light=so,"skin"==o?(e.metalness=new THREE.FloatNode(0),e.roughness=new THREE.FloatNode(1),e.reflectivity=new THREE.FloatNode(0),e.clearCoat=new THREE.FloatNode(.2),e.clearCoatRoughness=new THREE.FloatNode(.3),e.environment=new THREE.CubeTextureNode(cubemap)):(e.specular=new THREE.ColorNode(3092013),e.shininess=new THREE.FloatNode(15)),addGui("skinColor",to.value.getHex(),function(e){to.value.setHex(e)},!0),addGui("bloodColor",ro.value.getHex(),function(e){ro.value.setHex(e)},!0),addGui("wrapLight",ao.number,function(e){ao.number=e},!1,0,3),addGui("wrapShadow",Eo.number,function(e){Eo.number=e},!1,-1,0);break;case"toon":e=new THREE.PhongNodeMaterial;var wo=new THREE.FloatNode(3.43),co=new THREE.LightNode,G=new THREE.ColorNode(11189247),mo=new THREE.ColorNode(16711680),po=new THREE.FloatNode(.23),ho=new THREE.FloatNode(0),To=new THREE.LuminanceNode(co),bo=new THREE.OperatorNode(To,wo,THREE.OperatorNode.MUL),Mo=new THREE.Math1Node(bo,THREE.Math1Node.CEIL),vo=new THREE.OperatorNode(Mo,wo,THREE.OperatorNode.DIV),$e=new THREE.Math1Node(new THREE.PositionNode(THREE.PositionNode.VIEW),THREE.Math1Node.NORMALIZE),eo=new THREE.Math1Node(new THREE.NormalNode(THREE.NormalNode.VIEW),THREE.Math1Node.NORMALIZE),y=new THREE.Math2Node($e,eo,THREE.Math2Node.DOT),fo=new THREE.Math1Node(y,THREE.Math1Node.ABS),go=new THREE.OperatorNode(fo,new THREE.FloatNode(1),THREE.OperatorNode.DIV),xo=new THREE.Math3Node(go,po,ho,THREE.Math3Node.SMOOTHSTEP),Oo=new THREE.Math1Node(new THREE.Math1Node(xo,THREE.Math1Node.SAT),THREE.Math1Node.INVERT);e.color=G,e.light=vo,e.shininess=new THREE.FloatNode(0),e.environment=mo,e.environmentAlpha=Oo,addGui("color",G.value.getHex(),function(e){G.value.setHex(e)},!0),addGui("lineColor",mo.value.getHex(),function(e){mo.value.setHex(e)},!0),addGui("count",wo.number,function(e){wo.number=e},!1,1,8),addGui("lineSize",po.number,function(e){po.number=e},!1,0,1),addGui("lineInner",ho.number,function(e){ho.number=e},!1,0,1),addGui("ignoreIndirectLight",!1,function(o){e.ao=o?new THREE.FloatNode:void 0,e.build()});break;case"custom-attribute":teapot.attributes.custom=teapot.attributes.position,e=new THREE.PhongNodeMaterial,e.color=new THREE.AttributeNode("custom",3);break;case"expression":e=new THREE.PhongNodeMaterial;var s=new THREE.FloatNode(.5);e.color=new THREE.FunctionNode("myCustomUv + (sin(time*speed)*.5) + (position * .05)","vec3"),e.color.keywords.speed=s,e.transform=new THREE.FunctionNode("mod(time*speed,1.0) < 0.5 ? position + (worldNormal*(1.0+sin(time*speed*1.0))*3.0) : position + sin( position.x * sin(time*speed*2.0))","vec3"),e.transform.keywords.speed=s,THREE.NodeLib.addKeyword("myCustomUv",function(e){return new THREE.ReflectNode}),addGui("speed",s.number,function(e){s.number=e},!1,0,1);break;case"reserved-keywords":e=new THREE.PhongNodeMaterial;var Fo=new THREE.FunctionNode(["vec4 keywordsexample( sampler2D texture ) {","\treturn texture2D( texture, myUV ) + vec4( position * myAlpha, 0.0 );","}"].join("\n"));Fo.keywords.myAlpha=new THREE.ConstNode("float myAlpha .05"),THREE.NodeLib.addKeyword("myUV",function(e){return new THREE.UVNode}),console.log(THREE.NodeLib.keywords),e.color=new THREE.FunctionCallNode(Fo,[new THREE.TextureNode(getTexture("brick"))]);break;case"varying":e=new THREE.PhongNodeMaterial;var Go=new THREE.VarNode("vec3"),Co=new THREE.FunctionNode(["float setMyVar( vec3 pos ) {","\tmyVar = pos;","\treturn 0.;","}"].join("\n"));Co.keywords.myVar=Go;var ko=new THREE.FunctionNode("setMyVar( position * .1 ) + position","vec3",[Co]);ko.keywords.tex=new THREE.TextureNode(getTexture("brick")),e.transform=ko,e.color=Go;break;case"triangle-blur":e=new THREE.PhongNodeMaterial;var yo=new THREE.Vector2Node(.5,.25),Ae=new THREE.FloatNode(1),So=new THREE.FunctionNode(["vec4 blurtexture(sampler2D texture, vec2 uv, vec2 delta) {","\tvec4 color = vec4( 0.0 );","\tfloat total = 0.0;","\tfloat offset = rand( uv );","\tfor ( float t = -BLUR_ITERATIONS; t <= BLUR_ITERATIONS; t ++ ) {","\t\tfloat percent = ( t + offset - 0.5 ) / BLUR_ITERATIONS;","\t\tfloat weight = 1.0 - abs( percent );","\t\tcolor += texture2D( texture, uv + delta * percent ) * weight;","\t\ttotal += weight;","\t}","\treturn color / total;","}"].join("\n"),[new THREE.ConstNode("float BLUR_ITERATIONS 10.0")]),Ao=new THREE.FunctionCallNode(So,{texture:new THREE.TextureNode(getTexture("brick")),delta:yo,uv:new THREE.UVNode}),G=new THREE.Math3Node(new THREE.TextureNode(getTexture("brick")),Ao,Ae,THREE.Math3Node.MIX);e.color=G,addGui("alpha",Ae.number,function(e){Ae.number=e},!1,0,1),addGui("deltaX",yo.x,function(e){yo.x=e},!1,0,1),addGui("deltaY",yo.x,function(e){yo.y=e},!1,0,1);break;case"firefly":e=new THREE.PhongNodeMaterial;var l=new THREE.TimerNode,s=new THREE.FloatNode(.5),G=new THREE.ColorNode(10026752),Lo=new THREE.OperatorNode(l,s,THREE.OperatorNode.MUL),Io=new THREE.OperatorNode(Lo,new THREE.ConstNode(THREE.ConstNode.PI2),THREE.OperatorNode.MUL),Do=new THREE.Math1Node(Io,THREE.Math1Node.SIN),Po=new THREE.OperatorNode(Do,G,THREE.OperatorNode.MUL),Uo=new THREE.Math1Node(Po,THREE.Math1Node.SIN);e.color=new THREE.ColorNode(0),e.emissive=Uo,addGui("speed",s.number,function(e){s.number=e},!1,0,3);break;case"sss":case"translucent":var Vo=new THREE.Vector3Node,jo=new THREE.PositionNode(THREE.PositionNode.VIEW),Bo=new THREE.CameraNode(THREE.CameraNode.POSITION),Wo=new THREE.Math2Node(Vo,Bo,THREE.Math2Node.DISTANCE),Xo=new THREE.SwitchNode(jo,"z"),zo=new THREE.OperatorNode(Wo,Xo,THREE.OperatorNode.SUB),Zo=new THREE.OperatorNode(zo,new THREE.FloatNode(70),THREE.OperatorNode.ADD),_o=new THREE.Math3Node(Zo,new THREE.FloatNode(0),new THREE.FloatNode(50),THREE.Math3Node.SMOOTHSTEP);rtTexture=new THREE.WebGLRenderTarget(window.innerWidth,window.innerHeight,{minFilter:THREE.LinearFilter,magFilter:THREE.NearestFilter,format:THREE.RGBFormat});var Yo=new THREE.PhongNodeMaterial;Yo.environment=_o,Yo.side=THREE.BackSide,Yo.build(),rtMaterial=Yo,e=new THREE.StandardNodeMaterial;var Ko,qo,Jo=new THREE.TextureNode(rtTexture,new THREE.ScreenUVNode(new THREE.ResolutionNode(renderer))),Qo=new THREE.OperatorNode(_o,Jo,THREE.OperatorNode.SUB),$o=new THREE.Math3Node(new THREE.FloatNode(-.1),new THREE.FloatNode(.5),Qo,THREE.Math3Node.SMOOTHSTEP),en=new THREE.Math1Node($o,THREE.Math1Node.SAT);if("sss"==o){var on=new THREE.Math2Node(_o,en,THREE.Math2Node.MIN);Ko=new THREE.ColorNode(13946811),qo=new THREE.ColorNode(13648679);var G=new THREE.Math3Node(qo,Ko,on,THREE.Math3Node.MIX),nn=new THREE.OperatorNode(new THREE.LightNode,G,THREE.OperatorNode.ADD);e.color=Ko,e.roughness=new THREE.FloatNode(.1),e.metalness=new THREE.FloatNode(.5),e.light=nn,e.environment=G}else{Ko=new THREE.ColorNode(13648679),qo=new THREE.ColorNode(1707540);var G=new THREE.Math3Node(Ko,qo,en,THREE.Math3Node.MIX),nn=new THREE.OperatorNode(new THREE.LightNode,G,THREE.OperatorNode.ADD);e.color=new THREE.ColorNode(16777215),e.roughness=new THREE.FloatNode(.1),e.metalness=new THREE.FloatNode(.5),e.light=nn,e.environment=G}addGui("frontColor",Ko.value.getHex(),function(e){Ko.value.setHex(e)},!0),addGui("backColor",qo.value.getHex(),function(e){qo.value.setHex(e)},!0),addGui("area",$o.b.number,function(e){$o.b.number=e},!1,0,1)}e.build(),mesh.material=e}function onWindowResize(){var e=window.innerWidth,o=window.innerHeight;camera.aspect=e/o,camera.updateProjectionMatrix(),renderer.setSize(e,o),rtTexture&&rtTexture.setSize(e,o)}function animate(){var e=clock.getDelta();if(move){var o=.005*Date.now();mesh.position.z=10*Math.cos(o),mesh.position.y=10*Math.sin(o)}else mesh.position.z=mesh.position.y=0;mesh.material.updateFrame(e),rtTexture&&(scene.overrideMaterial=rtMaterial,renderer.render(scene,camera,rtTexture,!0),scene.overrideMaterial=null),renderer.render(scene,camera),requestAnimationFrame(animate)}var container=document.getElementById("container"),renderer,scene,camera,clock=new THREE.Clock,fov=50,teapot,mesh,controls,move=!1,rtTexture,rtMaterial,gui,guiElements=[],textures={brick:{url:"textures/brick_diffuse.jpg"},grass:{url:"textures/terrain/grasslight-big.jpg"},grassNormal:{url:"textures/terrain/grasslight-big-nm.jpg"},decalDiffuse:{url:"textures/decal/decal-diffuse.png"},cloud:{url:"textures/lava/cloud.png"},spherical:{url:"textures/envmap.png"}},param={example:"standard"},cubemap=function(){var e="textures/cube/Park2/",o=".jpg",n=[e+"posx"+o,e+"negx"+o,e+"posy"+o,e+"negy"+o,e+"posz"+o,e+"negz"+o],t=(new THREE.CubeTextureLoader).load(n);return t.format=THREE.RGBFormat,t}();window.addEventListener("load",init);</script>

	

</body></html>