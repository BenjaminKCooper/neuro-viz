<!DOCTYPE html><html lang="en"><head>
		<title>three.js webgl - geometry - spline extrusion</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,user-scalable=no,minimum-scale=1,maximum-scale=1">
		<style>
			body {
				font-family: Monospace;
				background-color: #f0f0f0;
				margin: 0px;
				overflow: hidden;
			}
		</style>
	</head>
	<body>

		<script src="../build/three.js"></script>
		<script src="js/controls/OrbitControls.js"></script>

		
		<script src="js/CurveExtras.js"></script>

		<script src="js/libs/stats.min.js"></script>


		<script>function addTube(){var e=document.getElementById("dropdown").value,n=parseInt(document.getElementById("segments").value);closed2=document.getElementById("closed").checked;var t=parseInt(document.getElementById("radiusSegments").value);void 0!==tubeMesh&&parent.remove(tubeMesh),extrudePath=splines[e],tube=new THREE.TubeBufferGeometry(extrudePath,n,2,t,closed2),addGeometry(tube,16711935),setScale()}function setScale(){scale=parseInt(document.getElementById("scale").value),tubeMesh.scale.set(scale,scale,scale)}function addGeometry(e,n){tubeMesh=THREE.SceneUtils.createMultiMaterialObject(e,[new THREE.MeshLambertMaterial({color:n}),new THREE.MeshBasicMaterial({color:0,opacity:.3,wireframe:!0,transparent:!0})]),parent.add(tubeMesh)}function animateCamera(e){e===!0&&(animation=animation===!1,document.getElementById("animation").value="Camera Spline Animation View: "+(animation?"ON":"OFF")),lookAhead=document.getElementById("lookAhead").checked,showCameraHelper=document.getElementById("cameraHelper").checked,cameraHelper.visible=showCameraHelper,cameraEye.visible=showCameraHelper}function init(){container=document.createElement("div"),document.body.appendChild(container);var e=document.createElement("div");e.style.position="absolute",e.style.top="10px",e.style.width="100%",e.style.textAlign="center",e.innerHTML='Spline Extrusion Examples by <a href="http://www.lab4games.net/zz85/blog">zz85</a><br/>Select spline:',e.innerHTML+=dropdown,e.innerHTML+='<br/>Scale: <select id="scale" onchange="setScale()"><option>1</option><option>2</option><option selected>4</option><option>6</option><option>10</option></select>',e.innerHTML+='<br/>Extrusion Segments: <select onchange="addTube()" id="segments"><option>50</option><option selected>100</option><option>200</option><option>400</option></select>',e.innerHTML+='<br/>Radius Segments: <select id="radiusSegments" onchange="addTube()"><option>1</option><option>2</option><option selected>3</option><option>4</option><option>5</option><option>6</option><option>8</option><option>12</option></select>',e.innerHTML+='<br/>Closed:<input id="closed" onchange="addTube()" type="checkbox" checked />',e.innerHTML+='<br/><br/><input id="animation" type="button" onclick="animateCamera(true)" value="Camera Spline Animation View: OFF"/><br/> Look Ahead <input id="lookAhead" type="checkbox" onchange="animateCamera()" /> Camera Helper <input id="cameraHelper" type="checkbox" onchange="animateCamera()" />',container.appendChild(e),camera=new THREE.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.01,1e4),camera.position.set(0,50,500),scene=new THREE.Scene;var n=new THREE.DirectionalLight(16777215);n.position.set(0,0,1),scene.add(n),parent=new THREE.Object3D,scene.add(parent),splineCamera=new THREE.PerspectiveCamera(84,window.innerWidth/window.innerHeight,.01,1e3),parent.add(splineCamera),cameraHelper=new THREE.CameraHelper(splineCamera),scene.add(cameraHelper),addTube(),cameraEye=new THREE.Mesh(new THREE.SphereGeometry(5),new THREE.MeshBasicMaterial({color:14540253})),parent.add(cameraEye),cameraHelper.visible=showCameraHelper,cameraEye.visible=showCameraHelper,renderer=new THREE.WebGLRenderer({antialias:!0}),renderer.setClearColor(15790320),renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth,window.innerHeight),container.appendChild(renderer.domElement),stats=new Stats,container.appendChild(stats.dom),controls=new THREE.OrbitControls(camera,renderer.domElement),window.addEventListener("resize",onWindowResize,!1)}function onWindowResize(){windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2,camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}function animate(){requestAnimationFrame(animate),render(),stats.update()}function render(){var e=Date.now(),n=2e4,t=e%n/n,o=tube.parameters.path.getPointAt(t);o.multiplyScalar(scale);var a=tube.tangents.length,r=t*a,i=Math.floor(r),l=(i+1)%a;binormal.subVectors(tube.binormals[l],tube.binormals[i]),binormal.multiplyScalar(r-i).add(tube.binormals[i]);var s=tube.parameters.path.getTangentAt(t),c=15;normal.copy(binormal).cross(s),o.add(normal.clone().multiplyScalar(c)),splineCamera.position.copy(o),cameraEye.position.copy(o);var d=tube.parameters.path.getPointAt((t+30/tube.parameters.path.getLength())%1).multiplyScalar(scale);lookAhead||d.copy(o).add(s),splineCamera.matrix.lookAt(splineCamera.position,d,normal),splineCamera.rotation.setFromRotationMatrix(splineCamera.matrix,splineCamera.rotation.order),cameraHelper.update(),renderer.render(scene,animation===!0?splineCamera:camera)}var container,stats,camera,scene,renderer,splineCamera,cameraHelper,cameraEye,text,plane,targetRotation=0,targetRotationOnMouseDown=0,mouseX=0,mouseXOnMouseDown=0,windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2,binormal=new THREE.Vector3,normal=new THREE.Vector3,pipeSpline=new THREE.CatmullRomCurve3([new THREE.Vector3(0,10,-10),new THREE.Vector3(10,0,-10),new THREE.Vector3(20,0,0),new THREE.Vector3(30,0,10),new THREE.Vector3(30,0,20),new THREE.Vector3(20,0,30),new THREE.Vector3(10,0,30),new THREE.Vector3(0,0,30),new THREE.Vector3(-10,10,30),new THREE.Vector3(-10,20,30),new THREE.Vector3(0,30,30),new THREE.Vector3(10,30,30),new THREE.Vector3(20,30,15),new THREE.Vector3(10,30,10),new THREE.Vector3(0,30,10),new THREE.Vector3(-10,20,10),new THREE.Vector3(-10,10,10),new THREE.Vector3(0,0,10),new THREE.Vector3(10,-10,10),new THREE.Vector3(20,-15,10),new THREE.Vector3(30,-15,10),new THREE.Vector3(40,-15,10),new THREE.Vector3(50,-15,10),new THREE.Vector3(60,0,10),new THREE.Vector3(70,0,0),new THREE.Vector3(80,0,0),new THREE.Vector3(90,0,0),new THREE.Vector3(100,0,0)]),sampleClosedSpline=new THREE.CatmullRomCurve3([new THREE.Vector3(0,-40,-40),new THREE.Vector3(0,40,-40),new THREE.Vector3(0,140,-40),new THREE.Vector3(0,40,40),new THREE.Vector3(0,-40,40)]);sampleClosedSpline.type="catmullrom",sampleClosedSpline.closed=!0;var splines={GrannyKnot:new THREE.Curves.GrannyKnot,HeartCurve:new THREE.Curves.HeartCurve(3.5),VivianiCurve:new THREE.Curves.VivianiCurve(70),KnotCurve:new THREE.Curves.KnotCurve,HelixCurve:new THREE.Curves.HelixCurve,TrefoilKnot:new THREE.Curves.TrefoilKnot,TorusKnot:new THREE.Curves.TorusKnot(20),CinquefoilKnot:new THREE.Curves.CinquefoilKnot(20),TrefoilPolynomialKnot:new THREE.Curves.TrefoilPolynomialKnot(14),FigureEightPolynomialKnot:new THREE.Curves.FigureEightPolynomialKnot,DecoratedTorusKnot4a:new THREE.Curves.DecoratedTorusKnot4a,DecoratedTorusKnot4b:new THREE.Curves.DecoratedTorusKnot4b,DecoratedTorusKnot5a:new THREE.Curves.DecoratedTorusKnot5a,DecoratedTorusKnot5c:new THREE.Curves.DecoratedTorusKnot5c,PipeSpline:pipeSpline,SampleClosedSpline:sampleClosedSpline};extrudePath=new THREE.Curves.TrefoilKnot;var dropdown='<select id="dropdown" onchange="addTube(this.value)">',s;for(s in splines)dropdown+='<option value="'+s+'"',dropdown+=">"+s+"</option>";dropdown+="</select>";var closed2=!0,parent,tube,tubeMesh,animation=!1,lookAhead=!1,scale,showCameraHelper=!1;init(),animate();</script>

	

</body></html>