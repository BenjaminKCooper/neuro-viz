<!DOCTYPE html><html lang="en"><head>
		<title>three.js canvas - materials - video</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,user-scalable=no,minimum-scale=1,maximum-scale=1">
		<style>
			body {
				font-family: Monospace;
				background-color: #f0f0f0;
				margin: 0px;
				overflow: hidden;
			}
		</style>
	</head>
	<body>

		<script src="../build/three.js"></script>

		<script src="js/renderers/Projector.js"></script>
		<script src="js/renderers/CanvasRenderer.js"></script>

		<script src="js/libs/stats.min.js"></script>

		<video id="video" autoplay="" loop="" webkit-playsinline="" style="display:none">
			<source src="textures/sintel.mp4" type="video/mp4; codecs=&quot;avc1.42E01E, mp4a.40.2&quot;">
			<source src="textures/sintel.ogv" type="video/ogg; codecs=&quot;theora, vorbis&quot;">
		</video>

		<script>function init(){container=document.createElement("div"),document.body.appendChild(container);var e=document.createElement("div");e.style.position="absolute",e.style.top="10px",e.style.width="100%",e.style.textAlign="center",e.innerHTML='<a href="http://threejs.org" target="_blank">three.js</a> - video demo. playing <a href="http://durian.blender.org/" target="_blank">sintel</a> trailer',container.appendChild(e),camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,1e4),camera.position.z=1e3,scene=new THREE.Scene,video=document.getElementById("video"),image=document.createElement("canvas"),image.width=480,image.height=204,imageContext=image.getContext("2d"),imageContext.fillStyle="#000000",imageContext.fillRect(0,0,480,204),texture=new THREE.Texture(image);var t=new THREE.MeshBasicMaterial({map:texture,overdraw:.5});imageReflection=document.createElement("canvas"),imageReflection.width=480,imageReflection.height=204,imageReflectionContext=imageReflection.getContext("2d"),imageReflectionContext.fillStyle="#000000",imageReflectionContext.fillRect(0,0,480,204),imageReflectionGradient=imageReflectionContext.createLinearGradient(0,0,0,204),imageReflectionGradient.addColorStop(.2,"rgba(240, 240, 240, 1)"),imageReflectionGradient.addColorStop(1,"rgba(240, 240, 240, 0.8)"),textureReflection=new THREE.Texture(imageReflection);var i=new THREE.MeshBasicMaterial({map:textureReflection,side:THREE.BackSide,overdraw:.5}),n=new THREE.PlaneGeometry(480,204,4,4);mesh=new THREE.Mesh(n,t),mesh.scale.x=mesh.scale.y=mesh.scale.z=1.5,scene.add(mesh),mesh=new THREE.Mesh(n,i),mesh.position.y=-306,mesh.rotation.x=-Math.PI,mesh.scale.x=mesh.scale.y=mesh.scale.z=1.5,scene.add(mesh);for(var a=150,o=10,r=10,d=2*Math.PI,t=new THREE.SpriteCanvasMaterial({color:8421504,program:function(e){e.beginPath(),e.arc(0,0,.5,0,d,!0),e.fill()}}),c=0;c<o;c++)for(var l=0;l<r;l++)particle=new THREE.Sprite(t),particle.position.x=c*a-o*a/2,particle.position.y=-153,particle.position.z=l*a-r*a/2,particle.scale.x=particle.scale.y=2,scene.add(particle);renderer=new THREE.CanvasRenderer,renderer.setClearColor(15790320),renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth,window.innerHeight),container.appendChild(renderer.domElement),stats=new Stats,container.appendChild(stats.dom),document.addEventListener("mousemove",onDocumentMouseMove,!1),window.addEventListener("resize",onWindowResize,!1)}function onWindowResize(){windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2,camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}function onDocumentMouseMove(e){mouseX=e.clientX-windowHalfX,mouseY=.2*(e.clientY-windowHalfY)}function animate(){requestAnimationFrame(animate),render(),stats.update()}function render(){camera.position.x+=.05*(mouseX-camera.position.x),camera.position.y+=.05*(-mouseY-camera.position.y),camera.lookAt(scene.position),video.readyState===video.HAVE_ENOUGH_DATA&&(imageContext.drawImage(video,0,0),texture&&(texture.needsUpdate=!0),textureReflection&&(textureReflection.needsUpdate=!0)),imageReflectionContext.drawImage(image,0,0),imageReflectionContext.fillStyle=imageReflectionGradient,imageReflectionContext.fillRect(0,0,480,204),renderer.render(scene,camera)}var AMOUNT=100,container,stats,camera,scene,renderer,video,image,imageContext,imageReflection,imageReflectionContext,imageReflectionGradient,texture,textureReflection,mesh,mouseX=0,mouseY=0,windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2;init(),animate();</script>

	

</body></html>